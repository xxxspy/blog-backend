---
title: å¤šå±‚æ¨¡å‹åŠå…¶äº¤äº’æ•ˆåº”å…¥é—¨æ•™ç¨‹
date: 2023-09-02 15:24:07
tags: [è°ƒèŠ‚æ•ˆåº”, Rè¯­è¨€, å¤šå±‚æ¬¡æ¨¡å‹, æ··åˆæ•ˆåº”]
mathjax: true
---



æœ¬æ•™ç¨‹ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨å¤šå±‚æ¨¡å‹æ¥åˆ†æåµŒå¥—æ•°æ®ï¼Œä»¥åŠè°ƒèŠ‚æ•ˆåº”åœ¨è·¨å±‚ç»“æ„ä¸­çš„åˆ†ææ–¹æ³•ã€‚
æˆ‘ä»¬çš„æ¡ˆä¾‹æ•°æ®æ˜¯æ—¥è®°æ•°æ®ï¼ˆåµŒå¥—åœ¨ä¸ªäººä¸­çš„é‡å¤äº‹ä»¶ï¼‰ï¼Œæ„æ€æ˜¯æ¯ä¸ªäººéƒ½ä¼šé‡å¤æµ‹é‡å¤šæ¬¡ï¼Œä½†ä¹Ÿé€‚ç”¨äºå…¶ä»–ç±»å‹çš„åµŒå¥—æ•°æ®ã€‚

<!-- more -->

# æ•™ç¨‹ç›®æ ‡

- æŒæ¡åµŒå¥—æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å¦‚ä½•æ„å»ºè¿™æ ·çš„æ•°æ®
- æ„å»ºå¤šå±‚æ¨¡å‹ï¼ˆmultilevel modelï¼‰ï¼Œæœ‰äººä¹Ÿå«å¤šæ°´å¹³å›å½’ã€å¤šæ°´å¹³æ¨¡å‹ï¼Œä½†æ˜¯éƒ½å±äºæ··åˆæ•ˆåº”æ¨¡å‹ï¼ˆMixed effect modelï¼‰
- ç”¨å¤šå±‚æ¨¡å‹åˆ†æä¸ªä½“é—´å˜é‡å…³ç³»ä»¥åŠä¸ªä½“å†…éƒ¨å˜é‡å…³ç³»
- äº¤äº’æ•ˆåº”çš„å¯è§†åŒ–

# æ•™ç¨‹ç”¨åˆ°çš„åº“ï¼ˆè¯·è‡ªè¡Œå®‰è£…ï¼‰


```R
library(ggplot2)       # for æ•°æ®å¯è§†åŒ–
library(lme4)          # for æ··åˆæ•ˆåº”æ¨¡å‹ï¼ˆå¤šå±‚æ¨¡å‹ï¼‰çš„æ„å»º
library(lmerTest)      # for è®¡ç®—På€¼
library(psych)         # for æè¿°ç»Ÿè®¡
library(plyr)          # for æ•°æ®æ•´ç†
library(effects)       # for æ£€éªŒè°ƒèŠ‚æ•ˆåº”
library(interactions)  # for è°ƒèŠ‚æ•ˆåº”å¯è§†åŒ–
```


# æ•°æ®ä»‹ç»

æˆ‘ä»¬çš„æ•°æ®æ¥è‡ªäºä¸€ä¸ªé‡å¤æµ‹é‡çš„è°ƒæŸ¥ç ”ç©¶ï¼Œè™½ç„¶æˆ‘ä»¬æ²¡æœ‰æ‰¾åˆ°å…³äºæ•°æ®çš„è¯¦ç»†ä»‹ç»ï¼Œä½†æ˜¯æˆ‘ä»¬è‡³å°‘æ¸…æ¥šæˆ‘ä»¬ç”¨åˆ°çš„è¿™å‡ ä¸ªå˜é‡æ˜¯ä»€ä¹ˆæ„ä¹‰ã€‚
æ•°æ®åŒ…å«ä¸¤ä¸ªæ–‡ä»¶"daily-data.csv"å’Œ"person-data.csv"ï¼Œ è¿™ä¸¤ä¸ªæ–‡ä»¶çš„æ„ä¹‰å°±æ˜¯æ–‡ä»¶åæ‰€æ­ç¤ºçš„ï¼Œ ç¬¬ä¸€ä¸ªæ–‡ä»¶æ˜¯é‡å¤æµ‹é‡çš„æ•°æ®ï¼Œ
è¢«è¯•çš„æ¯å¤©æ±‡æŠ¥çš„æ•°æ®ï¼Œ ç¬¬äºŒä¸ªæ–‡ä»¶æ˜¯ä¸ªä½“çš„ç‰¹å¾æ•°æ®ï¼Œå®ƒåªé‡‡é›†äº†ä¸€æ¬¡ã€‚

æˆ‘ä»¬ç”¨åˆ°çš„å˜é‡:

- negaff: è‹±æ–‡å…¨ç§°æ˜¯ daily negative affect ï¼Œ æ¥è‡ªäºé‡å¤æµ‹é‡çš„æ•°æ®ï¼Œ æ˜¯æ¯å¤©é‡‡é›†çš„æ¶ˆææƒ…ç»ªæ•°æ®
- stress: å˜é‡pssçš„åå‘ç¼–ç ï¼Œ ä»£è¡¨è¢«è¯•æ¯å¤©çš„å‹åŠ›ï¼Œ æ˜¯é‡å¤æµ‹é‡çš„æ•°æ®
- bfi_nï¼š è¿™æ˜¯å¤§äº”äººæ ¼é‡è¡¨ä¸­çš„ç¥ç»è´¨å˜é‡ï¼Œ å®ƒæ˜¯ç¨³å®šçš„äººæ ¼ç‰¹å¾ï¼Œ æ‰€ä»¥ä¸æ˜¯é‡å¤æµ‹é‡æ•°æ®ï¼Œ å±äºä¸ªä½“å±‚é¢çš„å˜é‡

ä¸‹é¢æˆ‘ä»¬åŠ è½½ä¸¤ä¸ªæ•°æ®ï¼Œå–å‡ºç”¨åˆ°çš„å˜é‡ï¼š


```R
pdata = read.csv("person-data.csv")
ddata = read.csv("daily-data.csv")
pdata <- pdata[ ,c("id","bfi_n")]
ddata <- ddata[ ,c("id","day","negaff","pss")]
head(pdata)

```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 2</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>bfi_n</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>2.0</td></tr>
	<tr><th scope=row>2</th><td>102</td><td>2.0</td></tr>
	<tr><th scope=row>3</th><td>103</td><td>2.5</td></tr>
	<tr><th scope=row>4</th><td>104</td><td>2.5</td></tr>
	<tr><th scope=row>5</th><td>105</td><td>3.5</td></tr>
	<tr><th scope=row>6</th><td>106</td><td>1.5</td></tr>
</tbody>
</table>

</div>
{% endraw %}


æˆ‘ä»¬æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹æ—¥æµ‹æ•°æ®ï¼Œ å˜é‡dayè®°å½•çš„æ˜¯ç¬¬å‡ æ—¥ï¼Œ æ¯ä¸€è¡Œæ•°æ®ä¸æ˜¯è¢«è¯•æ ·æœ¬ï¼Œ æ˜¯è¢«è¯•æ¯å¤©çš„æ•°æ®ï¼Œä½ å¯ä»¥çœ‹ä¸‹é¢çš„æ•°æ®ï¼Œ
è¿™ç§æ ¼å¼çš„æ•°æ®å«åšé•¿æ ¼å¼ï¼Œ ç”¨äºå­˜å‚¨é‡æµ‹æ•°æ®çš„å¸¸ç”¨æ ¼å¼ã€‚


```R
head(ddata)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 4</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>day</th><th scope=col>negaff</th><th scope=col>pss</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>0</td><td>3.0</td><td>2.50</td></tr>
	<tr><th scope=row>2</th><td>101</td><td>1</td><td>2.3</td><td>2.75</td></tr>
	<tr><th scope=row>3</th><td>101</td><td>2</td><td>1.0</td><td>3.50</td></tr>
	<tr><th scope=row>4</th><td>101</td><td>3</td><td>1.3</td><td>3.00</td></tr>
	<tr><th scope=row>5</th><td>101</td><td>4</td><td>1.1</td><td>2.75</td></tr>
	<tr><th scope=row>6</th><td>101</td><td>5</td><td>1.0</td><td>2.75</td></tr>
</tbody>
</table>

</div>
{% endraw %}


# æ•°æ®æ•´ç†

#### æ„ŸçŸ¥å‹åŠ›çš„åå‘ç¼–ç 

pssæ˜¯æ„ŸçŸ¥å‹åŠ›ï¼Œ ä½†æ˜¯æ•°æ®ä¸­æ˜¯åˆ†æ•°è¶Šå¤§å‹åŠ›è¶Šå°ï¼Œ æ‰€ä»¥æˆ‘ä»¬åå‘ç¼–ç ä¸€ä¸‹ï¼Œ
ä½¿å¾—åˆ†æ•°è¶Šå¤§å‹åŠ›è¶Šå¤§ã€‚ 


```R
ddata$stress <- 4 - ddata$pss

psych::describe(ddata$stress)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A psych: 1 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>vars</th><th scope=col>n</th><th scope=col>mean</th><th scope=col>sd</th><th scope=col>median</th><th scope=col>trimmed</th><th scope=col>mad</th><th scope=col>min</th><th scope=col>max</th><th scope=col>range</th><th scope=col>skew</th><th scope=col>kurtosis</th><th scope=col>se</th></tr>
	<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>X1</th><td>1</td><td>1445</td><td>1.385525</td><td>0.6843377</td><td>1.25</td><td>1.36344</td><td>0.7413</td><td>0</td><td>4</td><td>4</td><td>0.3549276</td><td>0.1266323</td><td>0.01800266</td></tr>
</tbody>
</table>

</div>
{% endraw %}


æ‰€æœ‰çš„å˜é‡éƒ½å»ºè®®æ£€æŸ¥ä¸€ä¸‹å®ƒçš„åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›´æ–¹å›¾æ¥çœ‹ä¸€ä¸‹ï¼š


```R
ggplot(data=ddata, aes(x=stress)) +
  geom_histogram(fill="white", color="black",bins=19) +
  labs(x = "å‹åŠ›")
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
Warning message:
"[1m[22mRemoved 13 rows containing non-finite values (`stat_bin()`)."

</div>
{% endraw %}


{% asset_img output_9_1.png %}


#### æ•´ç†å˜é‡ï¼Œåˆ’åˆ†ä¸ºä¸ªä½“é—´å’Œä¸ªä½“å†…å˜é‡

ç°åœ¨æˆ‘ä»¬åˆ†æ¸…æ¥šä¸ªä½“é—´å˜é‡å’Œä¸ªä½“å†…å˜é‡ï¼Œ ä¸ªä½“é—´å˜é‡å°±æ˜¯ä¸éšæ—¶é—´å˜åŒ–çš„ï¼ŒåŒä¸€ä¸ªä¸ªä½“ç›¸åŒçš„å€¼ï¼Œ ä¸åŒçš„ä¸ªä½“ä¸åŒçš„å€¼ï¼Œè¿™äº›å˜é‡å¯ä»¥ç§°ä¸ºäººçš„ç‰¹è´¨ï¼›
ä¸ªä½“å†…å˜é‡æ˜¯éšæ—¶é—´å˜åŒ–çš„ï¼Œ åŒä¸€ä¸ªè¢«è¯•éšç€æ—¶é—´çš„å˜åŒ–é‡ï¼Œè¿™ç§å˜é‡å¯ä»¥ç§°ä¸ºçŠ¶æ€ï¼Œ å› ä¸ºçŠ¶æ€æ˜¯éšæ—¶é—´å˜åŒ–çš„ã€‚

æˆ‘ä»¬å…ˆè¦è¦å¤„ç†çš„æ˜¯å‹åŠ›ï¼ˆstressï¼‰è¿™ä¸ªå˜é‡ï¼Œ æ˜¾ç„¶å®ƒæ˜¯çŠ¶æ€å˜é‡ï¼Œ ä½†æ˜¯æ¯ä¸ªäººçš„çŠ¶æ€éƒ½æ˜¯å›´ç»•çš„è‡ªå·±çš„å‡å€¼å˜åŒ–çš„ï¼Œ
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»çŠ¶æ€ä¸­è®¡ç®—ä¸ªä½“å‡å€¼ï¼Œ ä»£è¡¨ä»–çš„ç‰¹è´¨ï¼Œ æ‰€ä»¥æ–°ç”Ÿæˆçš„å˜é‡ stress_trait å°±æ˜¯å‹åŠ›ç‰¹è´¨ï¼Œ ä¸éšæ—¶é—´å˜åŒ–çš„å˜é‡ã€‚ æˆ‘ä»¬å¯ä»¥è¿™æ ·è®¡ç®—è¿™ä¸ªå˜é‡ï¼š


```R
# è®¡ç®—ä¸ªä½“å‡å€¼
# negaff_traitè™½ç„¶ä¸æ˜¯æ¨¡å‹ä¸­çš„å˜é‡ï¼Œ ä½†æ˜¯æˆ‘ä»¬åæœŸå¯èƒ½ä¼šç”¨åˆ°å®ƒï¼Œæ‰€ä»¥ä¹Ÿåœ¨è¿™é‡Œä¸€å¹¶è®¡ç®—äº†
personmeans <- ddply(ddata, "id", summarize,
                       stress_trait = mean(stress, na.rm=TRUE),
                       negaff_trait = mean(negaff, na.rm=TRUE))
head(personmeans)
describe(personmeans)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 3</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>stress_trait</th><th scope=col>negaff_trait</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>1.06250</td><td>1.500000</td></tr>
	<tr><th scope=row>2</th><td>102</td><td>0.78125</td><td>2.218750</td></tr>
	<tr><th scope=row>3</th><td>103</td><td>1.25000</td><td>2.416667</td></tr>
	<tr><th scope=row>4</th><td>104</td><td>1.81250</td><td>1.550000</td></tr>
	<tr><th scope=row>5</th><td>105</td><td>1.75000</td><td>2.612500</td></tr>
	<tr><th scope=row>6</th><td>106</td><td>1.12500</td><td>2.071875</td></tr>
</tbody>
</table>

</div>
{% endraw %}



{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A psych: 3 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>vars</th><th scope=col>n</th><th scope=col>mean</th><th scope=col>sd</th><th scope=col>median</th><th scope=col>trimmed</th><th scope=col>mad</th><th scope=col>min</th><th scope=col>max</th><th scope=col>range</th><th scope=col>skew</th><th scope=col>kurtosis</th><th scope=col>se</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>id</th><td>1</td><td>190</td><td>318.294737</td><td>130.4413245</td><td>321.50000</td><td>318.993421</td><td>151.2252000</td><td>101.0000</td><td>532.0000</td><td>431.000</td><td>-0.04393582</td><td>-1.0945398</td><td>9.46320829</td></tr>
	<tr><th scope=row>stress_trait</th><td>2</td><td>190</td><td>  1.395533</td><td>  0.4788391</td><td>  1.40625</td><td>  1.394792</td><td>  0.5096437</td><td>  0.1875</td><td>  2.5625</td><td>  2.375</td><td>-0.04026841</td><td>-0.2337593</td><td>0.03473864</td></tr>
	<tr><th scope=row>negaff_trait</th><td>3</td><td>190</td><td>  2.478309</td><td>  0.7335710</td><td>  2.41250</td><td>  2.429841</td><td>  0.7227675</td><td>  1.1125</td><td>  5.0875</td><td>  3.975</td><td> 0.67593800</td><td> 0.4505905</td><td>0.05321883</td></tr>
</tbody>
</table>

</div>
{% endraw %}



```R
# å°†æ–°ç”Ÿæˆçš„ä¸ªä½“ç‰¹è´¨å˜é‡åˆå¹¶åˆ°pdataæ•°æ®æ¡†, pdata æ˜¯è¢«è¯•æ ·æœ¬
pdata <- merge(pdata, personmeans, by="id")                                              
# åé¢æˆ‘ä»¬ä¼šåˆ†æè°ƒèŠ‚æ•ˆåº”ï¼Œ å¯¹å˜é‡ä¸­å¿ƒåŒ–æ˜¯å¿…ç„¶çš„æ­¥éª¤ï¼Œè¿™ä¸€æ­¥å°±æ˜¯å˜é‡ä¸­å¿ƒåŒ–
pdata$bfi_n_c <- scale(pdata$bfi_n,center=TRUE,scale=FALSE)
pdata$stress_trait_c <- scale(pdata$stress_trait,center=TRUE,scale=FALSE)
# ä¸ªä½“æ•°æ®çš„æè¿°æ€§ç»Ÿè®¡
describe(pdata)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A psych: 6 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>vars</th><th scope=col>n</th><th scope=col>mean</th><th scope=col>sd</th><th scope=col>median</th><th scope=col>trimmed</th><th scope=col>mad</th><th scope=col>min</th><th scope=col>max</th><th scope=col>range</th><th scope=col>skew</th><th scope=col>kurtosis</th><th scope=col>se</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>id</th><td>1</td><td>190</td><td>3.182947e+02</td><td>130.4413245</td><td>321.50000000</td><td> 3.189934e+02</td><td>151.2252000</td><td>101.000000</td><td>532.000000</td><td>431.000</td><td>-0.04393582</td><td>-1.0945398</td><td>9.46320829</td></tr>
	<tr><th scope=row>bfi_n</th><td>2</td><td>190</td><td>2.981579e+00</td><td>  0.9558661</td><td>  3.00000000</td><td> 2.996711e+00</td><td>  1.4826000</td><td>  1.000000</td><td>  5.000000</td><td>  4.000</td><td>-0.09238813</td><td>-0.8173050</td><td>0.06934582</td></tr>
	<tr><th scope=row>stress_trait</th><td>3</td><td>190</td><td>1.395533e+00</td><td>  0.4788391</td><td>  1.40625000</td><td> 1.394792e+00</td><td>  0.5096437</td><td>  0.187500</td><td>  2.562500</td><td>  2.375</td><td>-0.04026841</td><td>-0.2337593</td><td>0.03473864</td></tr>
	<tr><th scope=row>negaff_trait</th><td>4</td><td>190</td><td>2.478309e+00</td><td>  0.7335710</td><td>  2.41250000</td><td> 2.429841e+00</td><td>  0.7227675</td><td>  1.112500</td><td>  5.087500</td><td>  3.975</td><td> 0.67593800</td><td> 0.4505905</td><td>0.05321883</td></tr>
	<tr><th scope=row>bfi_n_c</th><td>5</td><td>190</td><td>1.683047e-16</td><td>  0.9558661</td><td>  0.01842105</td><td> 1.513158e-02</td><td>  1.4826000</td><td> -1.981579</td><td>  2.018421</td><td>  4.000</td><td>-0.09238813</td><td>-0.8173050</td><td>0.06934582</td></tr>
	<tr><th scope=row>stress_trait_c</th><td>6</td><td>190</td><td>1.927149e-17</td><td>  0.4788391</td><td>  0.01071742</td><td>-7.409148e-04</td><td>  0.5096437</td><td> -1.208033</td><td>  1.166967</td><td>  2.375</td><td>-0.04026841</td><td>-0.2337593</td><td>0.03473864</td></tr>
</tbody>
</table>

</div>
{% endraw %}


å°†ä¸ªä½“æ•°æ®åˆå¹¶åˆ°é‡å¤æµ‹é‡çš„æ—¥æµ‹æ•°æ®


```R

ddata_long <- merge(ddata,pdata,by="id")

# è®¡ç®—çŠ¶æ€å˜é‡ï¼Œå³å‡å»ä¸ªä½“å‡å€¼
ddata_long$stress_state <- ddata_long$stress - ddata_long$stress_trait
ddata_long$negaff_state <- ddata_long$negaff - ddata_long$negaff_trait

# æŸ¥çœ‹æ•°æ®
head(ddata_long)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 12</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>day</th><th scope=col>negaff</th><th scope=col>pss</th><th scope=col>stress</th><th scope=col>bfi_n</th><th scope=col>stress_trait</th><th scope=col>negaff_trait</th><th scope=col>bfi_n_c</th><th scope=col>stress_trait_c</th><th scope=col>stress_state</th><th scope=col>negaff_state</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>0</td><td>3.0</td><td>2.50</td><td>1.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.4375</td><td> 1.5</td></tr>
	<tr><th scope=row>2</th><td>101</td><td>1</td><td>2.3</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td> 0.8</td></tr>
	<tr><th scope=row>3</th><td>101</td><td>2</td><td>1.0</td><td>3.50</td><td>0.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.5625</td><td>-0.5</td></tr>
	<tr><th scope=row>4</th><td>101</td><td>3</td><td>1.3</td><td>3.00</td><td>1.00</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.0625</td><td>-0.2</td></tr>
	<tr><th scope=row>5</th><td>101</td><td>4</td><td>1.1</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.4</td></tr>
	<tr><th scope=row>6</th><td>101</td><td>5</td><td>1.0</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.5</td></tr>
</tbody>
</table>

</div>
{% endraw %}



```R

```

æˆ‘ä»¬å–å‡ºå‰25ä¸ªè¢«è¯•çš„æ•°æ®ï¼Œé€šè¿‡ç»˜åˆ¶æ¯ä¸ªè¢«è¯•çš„æ—¥æ¬¡æ•°æ®ï¼Œ æˆ‘ä»¬å¯ä»¥å¤§æ¦‚äº†è§£åˆ°è¢«è¯•ä¹‹é—´çš„å·®å¼‚æœ‰å¤šå¤§ï¼Œ
æ¯”å¦‚çœ‹ä¸‹é¢çš„å›¾ï¼Œ æ¯ä¸ªè¢«è¯•çš„æ‹Ÿåˆå›å½’çº¿çš„æ–œç‡éƒ½æœ‰å¾ˆå¤§å·®å¼‚ï¼Œ ç€é¢„ç¤ºç€å‹åŠ›å’Œæ¶ˆææƒ…ç»ªçš„å…³ç³»æ˜¯å› äººè€Œå¼‚çš„ã€‚


```R
#faceted plot
ggplot(data=ddata_long[which(ddata_long$id <= 125),], aes(x=stress_state,y=negaff)) +
  geom_point() +
  stat_smooth(method="lm", fullrange=TRUE) +
  xlab("Stress State") + ylab("Negative Affect (Continuous)") + 
  facet_wrap( ~ id) +
  theme(axis.title=element_text(size=16),
        axis.text=element_text(size=14),
        strip.text=element_text(size=14))
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
[1m[22m`geom_smooth()` using formula = 'y ~ x'
Warning message:
"[1m[22mRemoved 4 rows containing non-finite values (`stat_smooth()`)."
Warning message:
"[1m[22mRemoved 4 rows containing missing values (`geom_point()`)."

</div>
{% endraw %}


{% asset_img output_17_1.png %}

# æ··åˆæ•ˆåº”æ¨¡å‹


æˆ‘ä»¬ä½¿ç”¨ "lme4" åŒ…æ¥æ‹Ÿåˆæ··åˆæ•ˆåº”æ¨¡å‹ï¼Œä»¥åŠä¸€äº›è¾…åŠ©çš„RåŒ…ï¼š "lmerTest" æä¾›äº†ç”¨äºè·å– å‚æ•°æ£€éªŒçš„ p-vlaues çš„å·¥å…·ï¼›
"effects"åŒ…æä¾›äº†ç”¨äºè®¡ç®—å’Œç»˜åˆ¶åŸºäºæ¨¡å‹çš„é¢„æµ‹çš„å·¥å…·ï¼›"interactions" æä¾›äº†ç»˜åˆ¶å’Œæ¢æµ‹äº¤äº’æ•ˆåº”çš„å·¥å…·ã€‚

lme4 æä¾›äº†å‡½æ•° lmer ï¼Œ å®ƒç”¨äºæ‹Ÿåˆå¤šå±‚æ•°æ®æ¨¡å‹ï¼Œæˆ–è€…æ˜¯æ··åˆæ•ˆåº”æ¨¡å‹ã€‚ å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯dataï¼Œ è¾“å…¥ä½ çš„åŸå§‹æ•°æ®ï¼Œ
na.action å‚æ•°ç”¨äºæŒ‡å®šå¯¹ç¼ºå¤±å€¼çš„å¤„ç†æ–¹æ³•ã€‚

## é›¶æ¨¡å‹

æ¨¡å‹é‡Œé¢æ²¡æœ‰è‡ªå˜é‡ï¼Œ æˆ–è€…æ²¡æœ‰æˆ‘ä»¬å…³å¿ƒçš„å˜é‡ï¼Œ æ‰€ä»¥è¿™ç§æ¨¡å‹å«0æ¨¡å‹ã€‚
é›¶æ¨¡å‹å¯ä»¥è¢«ç§°ä¸º   unconditional means model ï¼Œ å®ƒç”¨äºè€ƒå¯Ÿå› å˜é‡çš„æ–¹å·®æœ‰å¤šå°‘æ¥è‡ªè¢«è¯•å†…ï¼Œ æœ‰å¤šå°‘æ¥è‡ªè¢«è¯•é—´ã€‚


```R
#unconditional means model
model0_fit <- lmer(formula = negaff ~ 1 + (1|id), 
              data=ddata_long,
              na.action=na.exclude)
summary(model0_fit)
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    Linear mixed model fit by REML. t-tests use Satterthwaite's method [
    <br />lmerModLmerTest]
    <br />Formula: negaff ~ 1 + (1 | id)
    <br />   Data: ddata_long
    <br />
    <br />REML criterion at convergence: 3833.5
    <br />
    <br />Scaled residuals: 
    <br />    Min      1Q  Median      3Q     Max 
    <br />-3.8739 -0.6123 -0.1608  0.4658  3.9394 
    <br />
    <br />Random effects:
    <br /> Groups   Name        Variance Std.Dev.
    <br /> id       (Intercept) 0.4270   0.6535  
    <br /> Residual             0.6627   0.8141  
    <br />Number of obs: 1441, groups:  id, 190
    <br />
    <br />Fixed effects:
    <br />             Estimate Std. Error        df t value Pr(>|t|)    
    <br />(Intercept)   2.46368    0.05229 185.80793   47.12   <2e-16 ***
    <br />---
    <br />Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

</div>
{% endraw %}



```R

# æˆ‘ä»¬ä½¿ç”¨ VarCorr å‡½æ•°æå–æ–¹å·® ï¼Œ idè¿™ä¸€è¡Œå¯¹åº”çš„æ˜¯è¢«è¯•å†…æ–¹å·®ï¼Œ Residualå¯¹åº”çš„æ˜¯æ®‹å·®æ–¹å·®ï¼ˆä¸å¯ä»¥è¢«è¢«è¯•å·®å¼‚æ‰€è§£é‡Šçš„æ–¹å·®
VarCorr(model0_fit)
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

     Groups   Name        Std.Dev.
    <br /> id       (Intercept) 0.65347 
    <br /> Residual             0.81408 

</div>
{% endraw %}


æˆ‘ä»¬æ¥è®¡ç®—ç»„é—´ç›¸å…³æ€§ï¼ˆICCï¼‰ï¼Œ å®ƒæŒ‡çš„æ˜¯è¢«è¯•å†…æ–¹å·®å æ€»æ–¹å·®çš„æ¯”ç‡ï¼Œ å¦‚å…¬å¼ï¼š

`$ ICC_{between} = \frac{\sigma^{2}_{u0}}{\sigma^{2}_{u0} + \sigma^{2}_{e}} $`

æˆ‘ä»¬é¦–å…ˆå–è¯æå–å¾—åˆ°éšæœºæ•ˆåº”çš„æ–¹å·®ï¼Œ æˆ‘ä»¬å°†ç»“æœä¿å­˜åˆ°æ•°æ®æ¡†ä¸­ï¼Œ æ–¹ä¾¿æå–æ•°æ®ï¼Œ æ¯•ç«Ÿæ•°æ®æ¡†æ˜¯æˆ‘ä»¬åœ¨Rä¸­æœ€ç†Ÿæ‚‰çš„æ•°æ®ç»™æ ¼å¼ã€‚


```R
randEffs <- as.data.frame(VarCorr(model0_fit))
randEffs
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 2 Ã— 5</caption>
<thead>
	<tr><th scope=col>grp</th><th scope=col>var1</th><th scope=col>var2</th><th scope=col>vcov</th><th scope=col>sdcor</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>id      </td><td>(Intercept)</td><td>NA</td><td>0.4270294</td><td>0.6534749</td></tr>
	<tr><td>Residual</td><td>NA         </td><td>NA</td><td>0.6627260</td><td>0.8140798</td></tr>
</tbody>
</table>

</div>
{% endraw %}


æ ¹æ®ä¸Šé¢çš„å…¬å¼ï¼Œ å¯ä»¥è®¡ç®—å¾—åˆ°ICCï¼š


```R
u0v = randEffs[1,4]
ev = randEffs[2,4]

icc <- u0v / (u0v+ev)
icc
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
0.391858025596418
</div>
{% endraw %}


æ ¹æ®æ— æ¡ä»¶å‡å€¼æ¨¡å‹è®¡ç®—ICCï¼Œç»“æœè¡¨æ˜ï¼Œåœ¨è´Ÿé¢æƒ…ç»ªçš„æ€»æ–¹å·®ä¸­ï¼Œ39.19%å½’å› äºäººä¸äººä¹‹é—´çš„å·®å¼‚ï¼Œ60.81%å½’å› äºäººå†…å·®å¼‚ã€‚
è¿™æ„å‘³ç€ä½¿ç”¨éšæ—¶é—´å˜åŒ–çš„å˜é‡ä½œä¸ºé¢„æµ‹å˜é‡æ—¶ï¼Œ å­˜åœ¨å¾ˆå¤§ä¸€éƒ¨åˆ†äººå†…æ–¹å·®ï¼Œ ç€æ„å‘³ç€æˆ‘ä»¬æ„å»ºå¤šå±‚æ¨¡å‹ã€æ··åˆæ•ˆåº”æ¨¡å‹æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚
ä¸“å®¶å»ºè®®ICCè¶…è¿‡0.05ï¼ˆ5%ï¼‰æ—¶å°±åº”è¯¥è€ƒè™‘ä½¿ç”¨æ··åˆæ•ˆåº”æ¨¡å‹ã€‚

## æ··åˆæ•ˆåº”æ¨¡å‹çš„æ„å»º

æˆ‘ä»¬åœ¨æ¨¡å‹é‡Œçº³å…¥äº†å¾ˆå¤šè‡ªå˜é‡ï¼Œ æˆ‘ä»¬ä¸€ä¸€è§£é‡Šï¼š

- 1 : è¿™æ˜¯å¸¸æ•°é¡¹
- day ï¼š æˆ‘ä»¬çš„å› å˜é‡æ—¶éšæ—¶é—´å˜åŒ–çš„ï¼Œ æ‰€ä»¥çº³å…¥äº†æ—¶é—´day
- stress_trait_c ï¼š è¿™æ˜¯å‹åŠ›ç‰¹è´¨å˜é‡ï¼Œ å…¶å®æ˜¯è¢«è¯•æ¯å¤©çš„å‹åŠ›çš„å¹³å‡å€¼æ¥ä»£è¡¨å®ƒçš„å‹åŠ›ç‰¹è´¨ï¼Œ è€Œ stress_trait_c æ˜¯å‹åŠ›ç‰¹è´¨ä¸­å¿ƒåŒ–çš„å˜é‡ï¼Œ ä¸ºä»€ä¹ˆè¦åšä¸­å¿ƒåŒ–ï¼Ÿ å› ä¸ºæˆ‘ä»¬éœ€è¦æŠŠå®ƒä½œä¸ºè°ƒèŠ‚å˜é‡
- stress_state ï¼š è¿™ä¸ªå˜é‡ä¹Ÿæ˜¯ç»è¿‡å¤„ç†çš„ï¼Œ æ˜¯æ¯æ—¥çš„å‹åŠ›å€¼å‡å»äº†è¢«è¯•å‡å€¼ï¼Œ æ„æ€æ˜¯è¿™ä¸ªå˜é‡æ˜¯ç»è¿‡äº†è¢«è¯•å†…çš„ä¸­å¿ƒåŒ–ï¼Œ æ‰€ä»¥è¿™ä¸ªå˜é‡ä»£è¡¨äº†è¢«è¯•å‹åŠ›åç¦»ä»–çš„å‡å€¼çš„å¤šå°‘
- stress_state:stress_trait_c ï¼š è°ƒèŠ‚é¡¹ï¼Œ stress_stateå¯¹æ¶ˆææƒ…ç»ªçš„å½±å“å¤§å°å¯èƒ½å—åˆ°stress_trait_cçš„å½±å“
- (1 + stress_state|id) ï¼š è¿™æ˜¯æ··åˆæ•ˆåº”æ¨¡å‹ä¸­å®šä¹‰éšæœºæ•ˆåº”çš„æ–¹æ³•ï¼Œ è¿™ç§å†™æ³•å«ä¹‰æ˜¯ æ¨¡å‹çš„æˆªè·å’Œstress_stateçš„æ•ˆåº”éƒ½éšidçš„ä¸åŒè€Œä¸åŒï¼Œ idæ˜¯è¢«è¯•id


```R
model1 <- lmer(formula = negaff ~ 1 + day + stress_trait_c + 
                      stress_state + stress_state:stress_trait_c + 
                      (1 + stress_state|id), 
                    data=ddata_long,
                    na.action=na.exclude)
summary(model1)
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    Linear mixed model fit by REML. t-tests use Satterthwaite's method [
    <br />lmerModLmerTest]
    <br />Formula: 
    <br />negaff ~ 1 + day + stress_trait_c + stress_state + stress_state:stress_trait_c +  
    <br />    (1 + stress_state | id)
    <br />   Data: ddata_long
    <br />
    <br />REML criterion at convergence: 3162.4
    <br />
    <br />Scaled residuals: 
    <br />    Min      1Q  Median      3Q     Max 
    <br />-3.5368 -0.6127 -0.0729  0.5093  4.4164 
    <br />
    <br />Random effects:
    <br /> Groups   Name         Variance Std.Dev. Corr
    <br /> id       (Intercept)  0.2135   0.4621       
    <br />          stress_state 0.1257   0.3546   0.53
    <br /> Residual              0.4038   0.6355       
    <br />Number of obs: 1438, groups:  id, 190
    <br />
    <br />Fixed effects:
    <br />                              Estimate Std. Error         df t value Pr(>|t|)
    <br />(Intercept)                  2.695e+00  4.583e-02  3.922e+02  58.806   <2e-16
    <br />day                         -6.580e-02  7.552e-03  1.250e+03  -8.713   <2e-16
    <br />stress_trait_c               1.038e+00  7.946e-02  1.859e+02  13.067   <2e-16
    <br />stress_state                 7.647e-01  4.561e-02  1.664e+02  16.765   <2e-16
    <br />stress_trait_c:stress_state  1.550e-01  9.780e-02  1.584e+02   1.585    0.115
    <br />                               
    <br />(Intercept)                 ***
    <br />day                         ***
    <br />stress_trait_c              ***
    <br />stress_state                ***
    <br />stress_trait_c:stress_state    
    <br />---
    <br />Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    <br />
    <br />Correlation of Fixed Effects:
    <br />            (Intr) day    strs__ strss_
    <br />day         -0.569                     
    <br />strss_trt_c  0.004  0.007              
    <br />stress_stat  0.216  0.012  0.002       
    <br />strss_tr_:_  0.034 -0.057  0.268 -0.118

</div>
{% endraw %}


### ç»“æœè§£è¯»

#### å›ºå®šæ•ˆåº” Fixed Effects:

- (Intercept):  ä»–æ˜¯æ¨¡å‹ä¸­æ‰€æœ‰å˜é‡å–0æ—¶ï¼Œ å› å˜é‡çš„å€¼ï¼Œ å…·ä½“åˆ°è¿™ä¸ªæ¨¡å‹ï¼Œ ä½ å¯ä»¥è¯´åœ¨ç¬¬0å¤©è¢«è¯•çš„å¹³å‡æ¶ˆææƒ…æ˜¯2.695
- day: åœ¨è°ƒç ”çš„è¿™å‡ å¤©é‡Œï¼Œ è¢«è¯•çš„æ¶ˆææƒ…ç»ªéšæ—¶é—´é€æ¸é™ä½ï¼Œ æ¯è¿‡ä¸€å¤©ï¼Œ æ¶ˆææƒ…ç»ªé™ä½-6.580e-02
- stress_trait_cï¼š å‹åŠ›ç‰¹è´¨æ¯”è¾ƒé«˜çš„è¢«è¯•å…·æœ‰è¾ƒå¤šçš„æ¶ˆææƒ…ç»ªï¼Œ å‹åŠ›ç‰¹è´¨å¢åŠ ä¸€ä¸ªå•ä½æ¶ˆææƒ…ç»ªå¢åŠ 1.308
- stress_state  : è¢«è¯•å½“å¤©æ„Ÿå—åˆ°çš„å‹åŠ›è¶Šå¤šä»–çš„æ¶ˆææƒ…ç»ªè¶Šå¤šï¼Œ å‹åŠ›å¢åŠ 1ä¸ªå•ä½æ¶ˆææƒ…ç»ªå¢åŠ 0.76
- stress_trait_c:stress_state ï¼š äº¤äº’æ•ˆåº”ä¸æ˜¾è‘—(0.16, p = 0.11)ï¼Œ è¿™æ„å‘³ç€stress_traitçš„æ•ˆåº”é‡ä¸å—stress_trait_cçš„å½±å“ï¼Œ æ„å‘³ç€è¢«è¯•çš„å‹åŠ›ç‰¹è´¨å¯¹å‹åŠ›çŠ¶æ€å’Œæ¶ˆææƒ…ç»ªçš„è°ƒèŠ‚æ•ˆåº”ä¸æ˜¾è‘—

#### éšæœºæ•ˆåº” Random Effects:

- sd((Intercept)): æ¯ä¸ªè¢«è¯•çš„æ¨¡å‹æˆªè·ä¸åŒï¼Œ è€Œè¿™ä¸ªæˆªè·çš„æ–¹å·®å°±æ˜¯ 0.2135
- sd(stress_state)ï¼š stress_state å¯¹ å› å˜é‡ æ¶ˆææƒ…ç»ªçš„æ•ˆåº”ä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œ è¿™ä¸ªæ•ˆåº”éšè¢«è¯•ä¸åŒè€Œä¸åŒï¼Œ è€Œè¿™ç§è¢«è¯•å¯¼è‡´çš„æ•ˆåº”çš„æ–¹å·®æ˜¯ 0.1257 
- Corr ï¼š Intercept å’Œ stress_state æ˜¯ä¸¤ä¸ªéšæœºå˜é‡ï¼Œ è¿™ä¸¤ä¸ªéšæœºå˜é‡çš„ç›¸å…³ç³»æ•°æ˜¯ 0.53ï¼Œ è¿™ä¸ªç›¸å…³ç³»æ•°è¾ƒå¤§ï¼Œ æ„å‘³ç€è¢«è¯•é¢„æœŸçš„æ¶ˆææƒ…ç»ªè¶Šå¤§ï¼Œ stress_state å¯¹æ¶ˆææƒ…ç»ªçš„å½±å“ä¹Ÿè¶Šå¤§

### é¢„æµ‹å€¼

åŸºäºæ ·æœ¬æ•°æ®å’Œå·²æœ‰æ¨¡å‹ï¼Œ å¯ä»¥ä¼°è®¡å› å˜é‡çš„å€¼ï¼Œ ä¹Ÿå«å› å˜é‡çš„é¢„æµ‹å€¼ï¼Œ å¦‚ä½•è·å–å› å˜é‡é¢„æµ‹å€¼ï¼š


```R
# ä¿å­˜æ¨¡å‹çš„é¢„æµ‹ç»“æœ
ddata_long$pred_m1 <- predict(model1)
head(ddata_long)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>day</th><th scope=col>negaff</th><th scope=col>pss</th><th scope=col>stress</th><th scope=col>bfi_n</th><th scope=col>stress_trait</th><th scope=col>negaff_trait</th><th scope=col>bfi_n_c</th><th scope=col>stress_trait_c</th><th scope=col>stress_state</th><th scope=col>negaff_state</th><th scope=col>pred_m1</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>0</td><td>3.0</td><td>2.50</td><td>1.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.4375</td><td> 1.5</td><td>2.122456</td></tr>
	<tr><th scope=row>2</th><td>101</td><td>1</td><td>2.3</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td> 0.8</td><td>1.908520</td></tr>
	<tr><th scope=row>3</th><td>101</td><td>2</td><td>1.0</td><td>3.50</td><td>0.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.5625</td><td>-0.5</td><td>1.398305</td></tr>
	<tr><th scope=row>4</th><td>101</td><td>3</td><td>1.3</td><td>3.00</td><td>1.00</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.0625</td><td>-0.2</td><td>1.628788</td></tr>
	<tr><th scope=row>5</th><td>101</td><td>4</td><td>1.1</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.4</td><td>1.711131</td></tr>
	<tr><th scope=row>6</th><td>101</td><td>5</td><td>1.0</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.5</td><td>1.645335</td></tr>
</tbody>
</table>

</div>
{% endraw %}


### è·å–å‚æ•°çš„ç½®ä¿¡åŒºé—´

å¯ä»¥ä½¿ç”¨confintå‡½æ•°è·å–å‚æ•°çš„ç½®ä¿¡åŒºé—´ï¼Œ ä½†æ˜¯ç»“æœæ¯”è¾ƒéš¾çœ‹æ‡‚ï¼Œ å› ä¸ºé‡Œé¢å¾ˆå¤šå‚æ•°æ˜¯æˆ‘ä»¬ä¸ç†Ÿæ‚‰çš„ï¼ˆsig01ï¼Œ sig02 ç­‰ï¼‰ï¼Œ
å› ä¸ºè¿™äº›å‚æ•°çš„åå­—å…¶å®æ˜¯æ¥è‡ªäºæ¨¡å‹çš„æ¨å¯¼ä¸­ç”¨åˆ°çš„ï¼Œ ä½ æ²¡æœ‰æ·±å…¥äº†è§£è¿‡æ··åˆæ•ˆåº”æ¨¡å‹çš„å‚æ•°ä¼°è®¡æ–¹æ³•ï¼Œ ä½ å¯èƒ½çœ‹ä¸æ‡‚ï¼Œ
ä¸è¿‡ï¼Œ æˆ‘ä»¬åªèƒ½è¯•ç€è®©ä½ æœ‰ä¸€ä¸ªæ„Ÿæ€§è®¤è¯†ï¼š

- .sig01 éšæœºæˆªè·çš„æ ‡å‡†å·®ï¼Œ å¦‚æœä½ æƒ³è·å¾—æ–¹å·®çš„ç½®ä¿¡åŒºé—´ï¼Œ åªéœ€è¦æŠŠè¿™ä¸ªå€¼å¹³æ–¹ä¸€ä¸‹
- sig02 éšæœºæˆªè·å’Œéšæœºæ–œç‡çš„ç›¸å…³ç³»æ•°
- sig03 éšæœºæ–œç‡çš„æ ‡å‡†å·®
- sigma æ®‹å·®æ ‡å‡†å·® 


```R
confint(model1)
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
Computing profile confidence intervals ...


</div>
{% endraw %}


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A matrix: 9 Ã— 2 of type dbl</caption>
<thead>
	<tr><th></th><th scope=col>2.5 %</th><th scope=col>97.5 %</th></tr>
</thead>
<tbody>
	<tr><th scope=row>.sig01</th><td> 0.40390297</td><td> 0.52245693</td></tr>
	<tr><th scope=row>.sig02</th><td> 0.27635505</td><td> 0.77129752</td></tr>
	<tr><th scope=row>.sig03</th><td> 0.25230527</td><td> 0.45069358</td></tr>
	<tr><th scope=row>.sigma</th><td> 0.60962930</td><td> 0.66244352</td></tr>
	<tr><th scope=row>(Intercept)</th><td> 2.60530435</td><td> 2.78468853</td></tr>
	<tr><th scope=row>day</th><td>-0.08058845</td><td>-0.05099124</td></tr>
	<tr><th scope=row>stress_trait_c</th><td> 0.88249219</td><td> 1.19390741</td></tr>
	<tr><th scope=row>stress_state</th><td> 0.67339998</td><td> 0.85449747</td></tr>
	<tr><th scope=row>stress_trait_c:stress_state</th><td>-0.03788643</td><td> 0.34703329</td></tr>
</tbody>
</table>

</div>
{% endraw %}


## å¯è§†åŒ–

å…ˆçœ‹è¢«è¯•å±‚é¢çš„å˜é‡ï¼Œ negaff_trait æ˜¯æ¶ˆææƒ…ç»ªç‰¹è´¨ï¼Œ å…¶å®å°±æ˜¯æ¯å¤©çš„æ¶ˆææƒ…ç»ªå–è¢«è¯•å†…çš„å‡å€¼ï¼Œ ä»£è¡¨äº†è¢«è¯•æ¯å¤©çš„å¹³å‡æ¶ˆææƒ…ç»ªï¼Œ
è¿™ä¸ªå˜é‡å¾ˆå¯èƒ½å—åˆ°å‹åŠ›ç‰¹è´¨ï¼ˆè¢«è¯•æ¯å¤©å‹åŠ›çŠ¶æ€çš„ä¸€ä¸ªè¢«è¯•å†…å‡å€¼ï¼‰çš„å½±å“ï¼Œ å› æ­¤å¯ä»¥ç»˜åˆ¶è¿™ä¸¤ä¸ªå˜é‡çš„å…³ç³»ï¼š


```R
ggplot(data=personmeans, aes(x=stress_trait, y=negaff_trait, group=factor(id)), legend=FALSE) +
  geom_point(colour="gray40") +
  geom_smooth(aes(group=1), method=lm, se=FALSE, fullrange=FALSE, lty=1, size=2, color="blue") +
  xlab("Trait Stress") + ylab("Trait Negative Affect") +
  theme_classic() +
  theme(axis.title=element_text(size=16),
        axis.text=element_text(size=12),
        plot.title=element_text(size=16, hjust=.5)) +
  ggtitle("Between-Person Association Plot\nTrait Stress & Negative Affect")
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
Warning message:
"[1m[22mUsing `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
[36mâ„¹[39m Please use `linewidth` instead."
[1m[22m`geom_smooth()` using formula = 'y ~ x'

</div>
{% endraw %}


{% asset_img output_34_1.png %}


ä¸‹é¢ç»˜åˆ¶negaff_stateå’Œstress_stateçš„å…³ç³» ï¼Œ å› ä¸ºè¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯æ—¥æµ‹æ•°æ®ï¼Œ å› æ­¤æ¯ä¸ªè¢«è¯•éƒ½åº”å½“æ˜¯ä¸åŒçš„ã€‚



```R
ggplot(data=ddata_long, aes(x=stress_state, y=negaff_state, group=factor(id), colour="gray"), legend=FALSE) +
  geom_smooth(method=lm, se=FALSE, fullrange=FALSE, lty=1, size=.5, color="gray40") +
  geom_smooth(aes(group=1), method=lm, se=FALSE, fullrange=FALSE, lty=1, size=2, color="blue") +
  xlab("Stress State") + ylab("Predicted State Negative Affect") +
  theme_classic() +
  theme(axis.title=element_text(size=18),
        axis.text=element_text(size=14),
        plot.title=element_text(size=18, hjust=.5)) +
  ggtitle("Within-Person Association Plot\nPerceived Stress & Negative Affect")
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
[1m[22m`geom_smooth()` using formula = 'y ~ x'
Warning message:
"[1m[22mRemoved 20 rows containing non-finite values (`stat_smooth()`)."
[1m[22m`geom_smooth()` using formula = 'y ~ x'
Warning message:
"[1m[22mRemoved 20 rows containing non-finite values (`stat_smooth()`)."

</div>
{% endraw %}



{% asset_img output_36_1.png %}

## å¢åŠ ç¥ç»è´¨å˜é‡ä½œä¸ºé¢„æµ‹å˜é‡

bfi_n_c æ˜¯å¤§äº”äººæ ¼é‡è¡¨ä¸­çš„ç¥ç»è´¨å˜é‡ï¼Œ å®ƒç»è¿‡å¤„ç†å¾—åˆ°äº†ä¸­å¿ƒåŒ–åçš„å˜é‡ï¼Œ 
è¿™ä¸ªå˜é‡ä¸­å¿ƒåŒ–çš„ç›®çš„ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªå˜é‡ä¼šå‚ä¸è°ƒèŠ‚æ•ˆåº”ï¼Œ æ„å»ºæ¨¡å‹å¦‚ä¸‹ï¼š


```R
# fit model
model2 <- lmer(formula = negaff ~ 1 + day + stress_trait_c + 
                      bfi_n_c + stress_trait_c:bfi_n_c +
                      stress_state + stress_state:stress_trait_c + 
                      stress_state:bfi_n_c + stress_state:stress_trait_c:bfi_n_c + 
                      (1 + stress_state|id),
                    data=ddata_long,
                    na.action=na.exclude)
#Look at results
summary(model2)
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    Linear mixed model fit by REML. t-tests use Satterthwaite's method [
    <br />lmerModLmerTest]
    <br />Formula: 
    <br />negaff ~ 1 + day + stress_trait_c + bfi_n_c + stress_trait_c:bfi_n_c +  
    <br />    stress_state + stress_state:stress_trait_c + stress_state:bfi_n_c +  
    <br />    stress_state:stress_trait_c:bfi_n_c + (1 + stress_state |      id)
    <br />   Data: ddata_long
    <br />
    <br />REML criterion at convergence: 3161.8
    <br />
    <br />Scaled residuals: 
    <br />    Min      1Q  Median      3Q     Max 
    <br />-3.4271 -0.6011 -0.0749  0.5045  4.4732 
    <br />
    <br />Random effects:
    <br /> Groups   Name         Variance Std.Dev. Corr
    <br /> id       (Intercept)  0.1955   0.4422       
    <br />          stress_state 0.1238   0.3518   0.51
    <br /> Residual              0.4040   0.6356       
    <br />Number of obs: 1438, groups:  id, 190
    <br />
    <br />Fixed effects:
    <br />                                      Estimate Std. Error         df t value
    <br />(Intercept)                          2.690e+00  4.556e-02  3.944e+02  59.055
    <br />day                                 -6.545e-02  7.572e-03  1.247e+03  -8.644
    <br />stress_trait_c                       9.695e-01  7.878e-02  1.835e+02  12.307
    <br />bfi_n_c                              1.543e-01  3.917e-02  1.809e+02   3.939
    <br />stress_state                         7.687e-01  4.682e-02  1.673e+02  16.418
    <br />stress_trait_c:bfi_n_c               3.715e-02  7.832e-02  1.824e+02   0.474
    <br />stress_trait_c:stress_state          1.254e-01  1.015e-01  1.692e+02   1.235
    <br />bfi_n_c:stress_state                 7.595e-02  4.845e-02  1.549e+02   1.568
    <br />stress_trait_c:bfi_n_c:stress_state -3.167e-02  1.024e-01  1.722e+02  -0.309
    <br />                                    Pr(>|t|)    
    <br />(Intercept)                          < 2e-16 ***
    <br />day                                  < 2e-16 ***
    <br />stress_trait_c                       < 2e-16 ***
    <br />bfi_n_c                             0.000117 ***
    <br />stress_state                         < 2e-16 ***
    <br />stress_trait_c:bfi_n_c              0.635819    
    <br />stress_trait_c:stress_state         0.218473    
    <br />bfi_n_c:stress_state                0.119006    
    <br />stress_trait_c:bfi_n_c:stress_state 0.757565    
    <br />---
    <br />Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
    <br />
    <br />Correlation of Fixed Effects:
    <br />            (Intr) day    strs__ bf_n_c strss_ st__:__ st__:_ bf__:_
    <br />day         -0.576                                                  
    <br />strss_trt_c  0.003  0.005                                           
    <br />bfi_n_c     -0.008  0.007 -0.224                                    
    <br />stress_stat  0.204  0.004  0.000  0.001                             
    <br />strss_t_:__ -0.179  0.008  0.008  0.040 -0.054                      
    <br />strss_tr_:_  0.042 -0.073  0.248 -0.056 -0.087  0.003               
    <br />bf_n_c:str_ -0.033  0.058 -0.058  0.258  0.016  0.009  -0.244       
    <br />strs__:__:_ -0.061  0.032  0.004  0.008 -0.233  0.243  -0.103 -0.059

</div>
{% endraw %}


### ç»“æœè§£è¯»

#### å›ºå®šæ•ˆåº”

- (Intercept): æˆªè·é¡¹ï¼Œ stress_trait_c  å’Œ bfi_n_c éƒ½å–0çš„æ—¶å€™ï¼ˆå‡å€¼ï¼‰ï¼Œ å› å˜é‡çš„æœŸæœ›æ˜¯ 2.69
- stress_trait_c ï¼š è¢«è¯•çš„å‹åŠ›ç‰¹è´¨è¶Šé«˜ï¼Œ æ„Ÿå—åˆ°çš„æ¶ˆææƒ…ç»ªè¶Šå¤š
- bfi_n_c ï¼š ç¥ç»è´¨å¾—åˆ†è¶Šé«˜çš„äººæ„Ÿå—åˆ°çš„æ¶ˆææƒ…ç»ªè¶Šå¤š(0.15, p = 0)
- stress_state ï¼š å½“å¤©æ„Ÿå—å‹åŠ›è¶Šå¤§ï¼Œ å½“å¤©çš„æ¶ˆææƒ…ç»ªè¶Šå¤šï¼ˆ0.77ï¼Œ p=0ï¼‰
- stress_trait_c:bfi_n_c ï¼š ç¥ç»è´¨å¯¹å‹åŠ›ç‰¹è´¨çš„è°ƒèŠ‚æ•ˆåº”ä¸æ˜¾è‘—(0.04, p = 0.64)
- stress_trait_c:stress_state ï¼š å‹åŠ›ç‰¹è´¨å¯¹æ—¥é—´å‹åŠ›çŠ¶æ€æ²¡æœ‰è°ƒèŠ‚æ•ˆåº”(0.13, p = 0.22)
- bfi_n_c:stress_state: ç¥ç»è´¨å¯¹æ—¥é—´å‹åŠ›çŠ¶æ€æ²¡æœ‰è°ƒèŠ‚æ•ˆåº”(0.08, p = 0.12)
- stress_trait_c:bfi_n_c:stress_stateï¼š ç¥ç»è´¨å¯¹å‹åŠ›ç‰¹è´¨å’Œå‹åŠ›çŠ¶æ€çš„è°ƒèŠ‚æ•ˆåº”çš„è°ƒèŠ‚ä½œç”¨ä¸æ˜¾è‘—

#### éšæœºæ•ˆåº”

ä¸ä¹‹å‰çš„ç»“è®ºä¸€è‡´ï¼Œ åœ¨æ­¤ç•¥å»


è·å–æ¨¡å‹é¢„æµ‹å€¼


```R
ddata_long$pred_m2 <- predict(model2)
head(ddata_long)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A data.frame: 6 Ã— 14</caption>
<thead>
	<tr><th></th><th scope=col>id</th><th scope=col>day</th><th scope=col>negaff</th><th scope=col>pss</th><th scope=col>stress</th><th scope=col>bfi_n</th><th scope=col>stress_trait</th><th scope=col>negaff_trait</th><th scope=col>bfi_n_c</th><th scope=col>stress_trait_c</th><th scope=col>stress_state</th><th scope=col>negaff_state</th><th scope=col>pred_m1</th><th scope=col>pred_m2</th></tr>
	<tr><th></th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl[,1]&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>1</th><td>101</td><td>0</td><td>3.0</td><td>2.50</td><td>1.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.4375</td><td> 1.5</td><td>2.122456</td><td>2.097006</td></tr>
	<tr><th scope=row>2</th><td>101</td><td>1</td><td>2.3</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td> 0.8</td><td>1.908520</td><td>1.888382</td></tr>
	<tr><th scope=row>3</th><td>101</td><td>2</td><td>1.0</td><td>3.50</td><td>0.50</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.5625</td><td>-0.5</td><td>1.398305</td><td>1.393416</td></tr>
	<tr><th scope=row>4</th><td>101</td><td>3</td><td>1.3</td><td>3.00</td><td>1.00</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td>-0.0625</td><td>-0.2</td><td>1.628788</td><td>1.614307</td></tr>
	<tr><th scope=row>5</th><td>101</td><td>4</td><td>1.1</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.4</td><td>1.711131</td><td>1.692027</td></tr>
	<tr><th scope=row>6</th><td>101</td><td>5</td><td>1.0</td><td>2.75</td><td>1.25</td><td>2</td><td>1.0625</td><td>1.5</td><td>-0.9815789</td><td>-0.3330326</td><td> 0.1875</td><td>-0.5</td><td>1.645335</td><td>1.626575</td></tr>
</tbody>
</table>

</div>
{% endraw %}


## è°ƒèŠ‚æ•ˆåº”çš„ç»˜åˆ¶

æ ¹æ®ä¸Šé¢çš„ç»“æœï¼Œstress_state:bfi_n_cçš„è°ƒèŠ‚æ•ˆåº”æ˜¯æ˜¾è‘—çš„ï¼Œ æ„å‘³ç€æˆ‘ä»¬æœ‰å¿…è¦è¿›ä¸€æ­¥å°†è°ƒèŠ‚æ•ˆåº”å¯è§†åŒ–ï¼Œ
é€šå¸¸æˆ‘ä»¬æœ‰ä¸¤ç§å¯è§†åŒ–è°ƒèŠ‚æ•ˆåº”çš„æ–¹æ³•ï¼Œ 1æ˜¯é€‰ç‚¹æ³•ï¼Œ å°±æ˜¯è‡ªå˜é‡å’Œè°ƒèŠ‚å˜é‡é€‰æ‹© MÂ±SD çš„å€¼ä½œä¸ºç‚¹ï¼Œ ç»˜åˆ¶åœ¨ä¸åŒè°ƒèŠ‚å˜é‡å–å€¼ä¸‹ï¼Œ è‡ªå˜é‡ä¸å› å˜é‡çš„å…³ç³»ï¼›
å¦ä¸€ç§æ–¹æ³•æ˜¯ç»˜åˆ¶JNå›¾ï¼Œå®ƒå¯ä»¥çœ‹åˆ°è°ƒèŠ‚å˜é‡å–å€¼ä»€ä¹ˆèŒƒå›´å†…ï¼Œ è‡ªå˜é‡å¯¹å› å˜é‡çš„æ•ˆåº”æ˜¯æ˜¾è‘—çš„ã€‚

## é€‰ç‚¹æ³•

æˆ‘ä»¬å…ˆçœ‹ä¸‹è‡ªå˜é‡å’Œè°ƒèŠ‚å˜é‡çš„æè¿°æ€§ç»Ÿè®¡ï¼Œ å› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨åˆ°å‡å€¼å’Œæ ‡å‡†å·®ã€‚


```R
describe(ddata_long$bfi_n_c)
describe(ddata_long$stress_state)
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A psych: 1 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>vars</th><th scope=col>n</th><th scope=col>mean</th><th scope=col>sd</th><th scope=col>median</th><th scope=col>trimmed</th><th scope=col>mad</th><th scope=col>min</th><th scope=col>max</th><th scope=col>range</th><th scope=col>skew</th><th scope=col>kurtosis</th><th scope=col>se</th></tr>
	<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>X1</th><td>1</td><td>1458</td><td>-0.01210021</td><td>0.9564619</td><td>0.01842105</td><td>0.002582012</td><td>1.4826</td><td>-1.981579</td><td>2.018421</td><td>4</td><td>-0.07586913</td><td>-0.7908849</td><td>0.02504891</td></tr>
</tbody>
</table>

</div>
{% endraw %}



{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
<table class="dataframe">
<caption>A psych: 1 Ã— 13</caption>
<thead>
	<tr><th></th><th scope=col>vars</th><th scope=col>n</th><th scope=col>mean</th><th scope=col>sd</th><th scope=col>median</th><th scope=col>trimmed</th><th scope=col>mad</th><th scope=col>min</th><th scope=col>max</th><th scope=col>range</th><th scope=col>skew</th><th scope=col>kurtosis</th><th scope=col>se</th></tr>
	<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><th scope=row>X1</th><td>1</td><td>1445</td><td>2.378342e-18</td><td>0.4943735</td><td>-0.03125</td><td>-0.01547413</td><td>0.4633125</td><td>-1.75</td><td>2.125</td><td>3.875</td><td>0.3580108</td><td>0.7924172</td><td>0.01300533</td></tr>
</tbody>
</table>

</div>
{% endraw %}


æˆ‘ä»¬ä½¿ç”¨ effect å‡½æ•°æ¥è®¡ç®—ä¸åŒè‡ªå˜é‡å’Œè°ƒèŠ‚å˜é‡å–å€¼ä¸‹å› å˜é‡çš„å€¼ï¼Œ effect å‡½æ•°çš„termå‚æ•°å°±æ˜¯ä½ å…³æ³¨çš„äº¤äº’é¡¹ï¼Œå³è‡ªå˜é‡å’Œè°ƒèŠ‚å˜é‡çš„ä¹˜ç§¯ã€‚
mod å‚æ•°å°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‹Ÿåˆå¾—åˆ°çš„æ¨¡å‹ï¼› xlevels ç”¨äºè®¾ç½®é€‰ç‚¹å€¼ï¼Œ æ¯”å¦‚è‡ªå˜é‡stress_stateçš„æ­£è´Ÿä¸€ä¸ªæ ‡å‡†å·®çš„å€¼å°±æ˜¯c(-0.49,+0.49) ã€‚


```R
#calculate effect
effects_model2 <- effect(term="bfi_n_c*stress_state", mod=model2,xlevels=list(bfi_n_c=c(-0.96, +0.96), stress_state=c(-0.49,+0.49)))
summary(effects_model2)
```

{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(stream):<br>
NOTE: bfi_n_c:stress_state is not a high-order term in the model

Warning message in Analyze.model(focal.predictors, mod, xlevels, default.levels, :
"the predictors stress_trait_c, bfi_n_c are one-column matrices that were converted to vectors"

</div>
{% endraw %}


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    
    <br /> bfi_n_c*stress_state effect
    <br />       stress_state
    <br />bfi_n_c    -0.49     0.49
    <br />  -0.96 1.964450 2.644774
    <br />  0.96  2.188157 3.011998
    <br />
    <br /> Lower 95 Percent Confidence Limits
    <br />       stress_state
    <br />bfi_n_c    -0.49     0.49
    <br />  -0.96 1.858012 2.510688
    <br />  0.96  2.080619 2.876440
    <br />
    <br /> Upper 95 Percent Confidence Limits
    <br />       stress_state
    <br />bfi_n_c    -0.49     0.49
    <br />  -0.96 2.070889 2.778860
    <br />  0.96  2.295694 3.147556

</div>
{% endraw %}


è¿™ä¸ªç»“æœè¾“å‡ºçš„æ˜¯è‡ªå˜é‡å’Œè°ƒèŠ‚å˜é‡ä¸åŒå–å€¼ä¸‹ï¼Œ å› å˜é‡çš„å€¼ï¼› åŒæ—¶è¾“å‡ºäº†å› å˜é‡å€¼çš„95%ç½®ä¿¡åŒºé—´ã€‚æœ‰äº†è¿™äº›æ•°æ®ï¼Œ æˆ‘ä»¬å°±å¯ä»¥ç»˜åˆ¶ç®€å•æ•ˆåº”å›¾ã€‚


```R
#convert to dataframe
effectsdata <- as.data.frame(effects_model2)
#plotting the effect evaluation (with standard error ribbon)
ggplot(data=effectsdata, aes(x=stress_state, y=fit, group=bfi_n_c), legend=FALSE) + 
  geom_point() +
  geom_line() +
  #geom_ribbon(aes(ymin=lower, ymax=upper), alpha=.3) +
  geom_errorbar(aes(ymin=lower, ymax=upper), width=.15) +
  xlab("Stress State") + xlim(-2,2) +
  ylab("Predicted Negative Affect") + ylim(1,7) +
  ggtitle("Differences in Stress Reactivity across Neuroticism")
```


{% asset_img output_48_1.png %}

johnson_neyman è¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨äºç»˜åˆ¶ JNå›¾ ï¼Œ å…³äºè¿™ä¸ªå›¾çš„åŸç†å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [ã€ŠJohnson-Neymanå›¾åŸç†å’Œåˆ¶ä½œExcelå·¥å…·åˆ†äº«ã€‹](https://mlln.cn/2023/08/23/Johnson-Neyman%E5%9B%BE%E5%8E%9F%E7%90%86%E5%92%8C%E5%88%B6%E4%BD%9CExcel%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/)ï¼Œ å¹¶ä¸”è¿™ç¯‡æ–‡ç« ä»‹ç»äº†[å¦‚ä½•ä½¿ç”¨excelç»˜åˆ¶JNå›¾](https://mlln.cn/2023/08/23/Johnson-Neyman%E5%9B%BE%E5%8E%9F%E7%90%86%E5%92%8C%E5%88%B6%E4%BD%9CExcel%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/)ã€‚


```R
johnson_neyman(model=model2, pred=stress_state, modx=bfi_n_c)
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    [1m[4mJOHNSON-NEYMAN INTERVAL[24m[22m 
    <br />
    <br />When bfi_n_c is [7mINSIDE[27m the interval [-4.45, 40.14], the slope of
    <br />stress_state is p < .05.
    <br />
    <br />[3mNote: The range of observed values of bfi_n_c is [23m[-1.98, 2.02]
    <br />

</div>
{% endraw %}



{% asset_img output_50_1.png %}

# ä¸€äº›æœ‰ç”¨å‡½æ•°


```R
BIC(logLik(model2))
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
3256.29897530418
</div>
{% endraw %}



```R
logLik(logLik(model2))
```


{% raw %}
<div class="output">
è¾“å‡º(plain):<br/>

    'log Lik.' -1580.888 (df=13)

</div>
{% endraw %}



```R
BIC(logLik(model2))
```


{% raw %}
<div class="output" contenteditable="true">
è¾“å‡º(html):<br>
3256.29897530418
</div>
{% endraw %}




# æ•°æ®ä¸‹è½½

æœ¬æ•™ç¨‹æ‰€æœ‰ç”¨åˆ°çš„ä»£ç å’Œæ•°æ®éƒ½å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ã€‚


> **æ³¨æ„**
> ç»Ÿè®¡å’¨è¯¢è¯·åŠ QQ 2726725926, å¾®ä¿¡ shujufenxidaizuo,  SPSSç»Ÿè®¡å’¨è¯¢æ˜¯æ”¶è´¹çš„, ä¸è®ºä»€ä¹ˆæ¨¡å‹éƒ½å¯ä»¥, åªé™åˆ¶äº1ä¸ªç ”ç©¶å†…. 
