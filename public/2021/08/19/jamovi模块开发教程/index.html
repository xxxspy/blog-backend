<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="applicable-device" content="pc,mobile">
    <meta name="MobileOptimized" content="width">
    <meta name="HandheldFriendly" content="true">
    <!--Description-->
    
        <meta name="description" content="专注于数据开发, 数据分析, 数据采集, python教学">
    

    <!--Author-->
    
        <meta name="author" content="xxxspy">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="jamovi模块开发教程">
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="专注于数据开发, 数据分析, 数据采集, python教学">
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="DataSense">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>jamovi模块开发教程 - DataSense</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <style>
    code{
    color: #d7ecff;
    font-size: 110%;
    }
    pre > code {
        -webkit-border-before: black;
        display: block;
        padding: 9.5px;
        margin: 0 0 10px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #f9f4f4;
        word-break: break-all;
        word-wrap: break-word;
        background-color: #f5f5f500;
        border: 1px solid #eff3f521;
        border-radius: 0;
    }
    pre > code::before {
        content:"- ";
        z-index: -1;
        left:-2px;
    }
    #feedAv{position: fixed!important;left:-9999999px!important;z-index:-1000!important;}

    #MZAD_POP_PLACEHOLDER{position: fixed!important;left:-9999999px!important;z-index:-1000!important;}

    #pop_ad{position: fixed!important;left:-9999999px!important;z-index:-1000!important;}

    </style>

    
    
    
    
    

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about.html">
                    About
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/contact.html">
                    Contact
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">
    <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i>
        
            <p id="main-title" class="title">DataSense</p>
        
        </a>
    </div>
</header>
<div class="page_list archive-container">
        
    <div class="archive-post" style="opacity: 1;">
        <a href="/2022/05/17/SPSS-AMOS数据分析案例教程-关于中介模型/">
            SPSS+AMOS数据分析案例教程-关于中介模
        </a>
    </div>
    <div class="archive-post" style="opacity: 1;">
        <a href="/2020/10/31/SPSS视频教程内容目录和跳转链接/">
            SPSS视频教程内容目录和跳转链接
        </a>
    </div>
    
</div>

    <!-- Main Content -->
    

    
        
<div class="row">
    <div class="col-md-9 col-sm-12">
        <!--Title and Logo-->
        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2021/08/19/jamovi模块开发教程/">
                jamovi模块开发教程
            </a>

        </h1>
        <div class="weibo-share">
            <p>微博@mlln-cn, 并附上文章url链接, 我就能回答你的问题奥!</p>
        </div>
        <div class="post-info">
            
                <span class="date">2021年08月19日</span>
            
            
            
        </div>
    </div>

    <div class="content">
    <!-- Table of Contents -->
    
        <!-- Gallery -->
        

        <!-- Post Content -->
        <p>本篇文章主要介绍如何为jamovi开发统计模块。jamovi统计分析咨询请加qq: 2726725926</p>
<a id="more"></a>
<!-- toc -->
<ul>
<li><a href="#起飞">起飞</a><ul>
<li><a href="#安装-jmvtools">安装 jmvtools</a></li>
<li><a href="#检查jmvtools可以找到jamovi">检查jmvtools可以找到jamovi</a></li>
<li><a href="#安装模块">安装模块</a></li>
</ul>
</li>
<li><a href="#创建模块">创建模块</a></li>
<li><a href="#创建分析">创建分析</a><ul>
<li><a href="#ttestayaml的定义"><code>ttest.a.yaml</code>的定义</a></li>
</ul>
</li>
<li><a href="#实现分析r代码">实现分析(R代码)</a><ul>
<li><a href="#填充表">填充表</a></li>
</ul>
</li>
<li><a href="#添加图">添加图</a><ul>
<li><a href="#代码实现">代码实现</a></li>
</ul>
</li>
<li><a href="#level-mean-sel-seu">level mean      sel      seu</a></li>
<li><a href="#1-oj-2066333-1945733-2186934">1 OJ 20.66333 19.45733 21.86934</a></li>
<li><a href="#2-vc-1696333-1545417-1847250">2 VC 16.96333 15.45417 18.47250</a></li>
<li><a href="#发布模块">发布模块</a></li>
<li><a href="#补充">补充</a><ul>
<li><a href="#依赖关系">依赖关系</a></li>
<li><a href="#命名空间">命名空间</a></li>
</ul>
</li>
<li><a href="#动态表">动态表</a></li>
<li><a href="#状态">状态</a><ul>
<li><a href="#clearwith">clearWith</a></li>
<li><a href="#isfilled">isFilled()</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h2><span id="起飞">起飞</span></h2><p>在开始之前，jamovi 中的分析模块是用R 编程语言编写的。本教程假设您有一些 R 知识，最好有一些编写 R 包的经验。</p>
<p>为jamovi 开发模块需要这个jmvtools包。在本教程中，我们将：</p>
<ul>
<li>安装 jmvtools</li>
<li>确保jmvtools可以找到jamovi</li>
<li>从 GitHub 构建和安装 jamovi 模块</li>
</ul>
<h3><span id="安装-jmvtools">安装 jmvtools</span></h3><p>jmvtools 可以从 jamovi 仓库获得，并且可以通过以下方式安装在 R 中：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">install.packages(<span class="string">'jmvtools'</span>, repos=c(<span class="string">'https://repo.jamovi.org'</span>, <span class="string">'https://cran.r-project.org'</span>))</span><br></pre></td></tr></table></figure>
<h3><span id="检查jmvtools可以找到jamovi">检查jmvtools可以找到jamovi</span></h3><p>现在你已经jmvtools安装好了，我们可以检查它是否可以找到你的jamovi安装：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmvtools::check()</span><br></pre></td></tr></table></figure>
<p>jmvtools 在可能被视为“常见地点”的地方搜索 jamovi，例如：</p>
<ul>
<li>/Applications</li>
<li>/usr/lib/jamovi</li>
<li>C:\Program Files</li>
</ul>
<p>如果jmvtools找不到，您可以在调用中指定路径check()：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmvtools::check(home=<span class="string">'C:\\Users\\jonathon\\Documents\\jamovi'</span>)</span><br></pre></td></tr></table></figure>
<p>注意代码中的路径需要根据你自己的电脑来设置</p>
<p>当然, 如果你想自己手动设置jamovi的路径, 也是可以的, 只需要执行下面的命令:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">options(jamovi_home=<span class="string">'jamovi的安装路径'</span>)</span><br></pre></td></tr></table></figure>
<h3><span id="安装模块">安装模块</span></h3><p>现在我们已经安装好了jmvtools，我们可以用它来构建和安装一个jamovi模块。接下来，我们将从 GitHub 下载一个模块，构建并安装它。我们将使用Base R模块 - 您可以使用此处的直接链接下载它:<a href="https://github.com/jamovi/jmvbaseR/archive/master.zip" target="_blank" rel="noopener">https://github.com/jamovi/jmvbaseR/archive/master.zip</a>  , 这是一个实验性的模块。</p>
<p> 下载到的文件是一个压缩包, 先解压到文件夹, RStudio 中打开该文件夹（或将您的工作目录设置为该目录）。现在我们可以调用install()函数：</p>
 <figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmvtools::install()   <span class="comment"># not to be mistaken for devtools::install()</span></span><br></pre></td></tr></table></figure>
<p>这将构建模块，并将其安装到 jamovi 中。</p>
<p>如果您现在转到打开的 jamovi 窗口，您会看到功能区上出现了一个新的“Base R”菜单，其中包含一组新的分析。从 R 安装和更新 jamovi 分析的能力非常棒，因为我们将在下一节中看到，我们可以对分析进行更改，jmvtools::install()再次运行，并立即看到这些更改反映在 jamovi 中。这使得开发和测试 jamovi 模块变得轻而易举！</p>
<h2><span id="创建模块">创建模块</span></h2><p>在本节中，我们将从头开始创建一个 jamovi 模块，并将其安装到 jamovi 中。</p>
<p>为 jamovi 创建模块的最简单方法是使用包中的create()函数jmvtools：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmvtools::create(<span class="string">'SuperAwesome'</span>)</span><br></pre></td></tr></table></figure>
<p>这将创建一个SuperAwesome目录。如果我们现在查看刚出炉的 SuperAwesome 的内容，我们会发现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SuperAwesome/</span><br><span class="line">├── DESCRIPTION</span><br><span class="line">├── NAMESPACE</span><br><span class="line">├── jamovi/</span><br><span class="line">|   └── 0000.yaml</span><br><span class="line">└── R/</span><br></pre></td></tr></table></figure>
<p>对于以前从事过 R 包开发工作的人来说，这应该看起来很熟悉。那是因为 jamovi 模块是R 包，但带有附加<code>jamovi/0000.yaml</code>文件。有了这个文件，<br>这个包就变成了双重公民：它可以构建到 R 包中，也可以构建到 jamovi 模块中。</p>
<p>如果您查看该<code>0000.yaml</code>文件，您会注意到它包含的内容与<code>DESCRIPTION</code>文件非常相似。但是，当我们向模块添加分析时，<br>它们也会列在此文件中。在开发的早期阶段，这个文件先不管他，我们稍后会回到它。</p>
<h2><span id="创建分析">创建分析</span></h2><p>一个独立样本t检验通常用于确定两个分组是否在一些变量均值上有显著差异。例如，您可能对一个街区的儿童与另一街区的儿童的身高是否不同感兴趣。在这种情况下，数据集将为每个孩子分配一行, 总共有两列数据, 一列代表身高, 一列代表街区。</p>
<p>对于那些熟悉t.testR 内置函数的人，如果两个变量分别是height和neighbourhood，则可以运行t检验：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.test(height ~ neighbourhood, data=data)</span><br></pre></td></tr></table></figure>
<p>在下一节中，我们将创建一个使用此函数的 t 检验 jamovi 分析。</p>
<p>jamovi 模块的最简单方法是使用jmvtools的函数<code>addAnalysis()</code>。首先我们将工作目录设置为SuperAwesome目录，然后调用addAnalysis()</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setwd(<span class="string">'SuperAwesome'</span>) <span class="comment"># 设置工作目录</span></span><br><span class="line">jmvtools::addAnalysis(name=<span class="string">'ttest'</span>, title=<span class="string">'Independent Samples T-Test'</span>)</span><br></pre></td></tr></table></figure>
<p>然后如果我们现在查看SuperAwesome模块的目录树，我们有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SuperAwesome/</span><br><span class="line">├── DESCRIPTION</span><br><span class="line">├── NAMESPACE</span><br><span class="line">├── jamovi/</span><br><span class="line">|   ├── ttest.a.yaml</span><br><span class="line">|   ├── ttest.r.yaml</span><br><span class="line">|   ├── ttest.u.yaml</span><br><span class="line">|   └── 0000.yaml</span><br><span class="line">└── R/</span><br><span class="line">    ├── ttest.h.R</span><br><span class="line">    └── ttest.b.R</span><br></pre></td></tr></table></figure>
<p>说到这里我有点不好意思说, 每次分析有5个文件。这种结构确实使事情更易于管理，因此尽管乍一看似乎有些过分，但背后有很好的理由。请耐心等待，它并不像看起来那么复杂。</p>
<p><img src="imgs/file-list.png"></p>
<p>yaml 是一种用于结构化数据的简单易读的文本格式。如果您不熟悉 yaml，可以在<a href="http://yaml.org/spec/1.2/spec.html" target="_blank" rel="noopener">此处</a>阅读有关格式的更多信息，但这可能不是必需的。它直观且易读，您可能会毫不费力地拿起它。</p>
<ul>
<li>ttest.a.yaml: 该文件包含了所有分析的元信息，说明它接收到的参数和用户界面选项等。我们将在接下来的教程涵盖这一点。</li>
<li>ttest.r.yaml: 该文件包含有关分析结果的显示方式。</li>
<li>ttest.u.yaml: 根据<code>ttest.a.yaml</code>的内容自动生成的。对于许多分析，这将产生良好的结果，并且不需要进一步编辑。</li>
<li>ttest.h.R: 这是一个头文件, 也是从<code>ttest.a.yaml</code>和<code>ttest.r.yaml</code>自动生成的, 你不需要看这个文件, 也不需要修改它</li>
<li>ttest.b.R: 实现分析的代码文件, 也是你花费最多时间的文件, 决定了你的分析是如何进行的</li>
</ul>
<h3><span id="ttestayaml的定义"><code>ttest.a.yaml</code>的定义</span></h3><p>jmvtools::addAnalysis()创建一个.a.yaml带有一些基本选项的默认文件。令人高兴的是，对于本教程，这些恰好对应于 t 检验所需的选项。我们生成的ttest.a.yaml文件如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">jas:</span>     <span class="string">"1.1"</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">"1.0.0"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">options:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">data</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Data</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">dep</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Dependent</span> <span class="string">Variable</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Variable</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">group</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Grouping</span> <span class="string">Variable</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Variable</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">alt</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Alternative</span> <span class="string">hypothesis</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">List</span></span><br><span class="line"><span class="attr">      options:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">notEqual</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">Not</span> <span class="string">equal</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">oneGreater</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">One</span> <span class="string">greater</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">twoGreater</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">Two</span> <span class="string">greater</span></span><br><span class="line"><span class="attr">      default:</span> <span class="string">notEqual</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">varEq</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Assume</span> <span class="string">equal</span> <span class="string">variances</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Bool</span></span><br><span class="line"><span class="attr">      default:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>文件顶部是有关分析的信息：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">name:</span>  <span class="string">ttest</span> <span class="comment"># 用到的函数名称, 它必须以字母开头，并且只能由字母和数字组成</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span>  <span class="comment"># 分析的标题是分析在菜单、帮助文本和结果中的显示方式</span></span><br><span class="line"><span class="attr">jas:</span>     <span class="string">"1.1"</span>  <span class="comment"># jamovi analysis spec</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">"1.0.0"</span> <span class="comment"># 你开发的模块的版本号</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure>
<p>接下来是选项: data，dep，group，alt和varEq。 当用作 R 包时，这些选项对应于传递给R 函数的参数。在这种情况下，也就是:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ttestIS(data, dep, group, alt=<span class="string">'not equal'</span>, varEq=<span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure>
<p>（如果你往里面看ttest.h.R，你会发现这个确切的函数已经生成了。）</p>
<p>在jamovi 中使用时，这些选项对应于分析的UI 选项。现在让我们来看看。安装我们刚刚创建的模块并打开jamovi（或者先打开jamovi，然后安装模块——顺序无关紧要）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmvtools::install()</span><br></pre></td></tr></table></figure>
<p>（请注意，如果您的模块有其他依赖项，这些也将在此阶段安装。您可以在本教程末尾的附加说明中阅读有关附加依赖项的更多信息。）</p>
<p>该SuperAwesome菜单现在可以使用了，并且包含Independent Samples T-Test。</p>
<p><img src="imgs/01.png"></p>
<p>打开这个分析的界面, 就会看到它的配置选项:</p>
<p><img src="imgs/02.png"></p>
<p>从<code>ttestis.a.yaml</code>文件中就可以找到这些配置选项的信息:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">- name:</span> <span class="string">dep</span></span><br><span class="line"><span class="attr">  title:</span> <span class="string">Dependent</span> <span class="string">Variable</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">Variable</span></span><br><span class="line"></span><br><span class="line"><span class="attr">- name:</span> <span class="string">group</span></span><br><span class="line"><span class="attr">  title:</span> <span class="string">Grouping</span> <span class="string">Variable</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">Variable</span></span><br></pre></td></tr></table></figure>
<p>我们可以看出来, dep和group的类型都是Variable, 意味着他们指的是数据集中的一列变量。</p>
<p>接下来看<code>alt</code>选项, 它是指的是一些额外假设, <code>options</code>中列出了所有可选项:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- name: alt</span><br><span class="line">  title: Alternative hypothesis</span><br><span class="line">  type: List</span><br><span class="line">  options:</span><br><span class="line">    - name: notEqual</span><br><span class="line">      title: Not equal</span><br><span class="line">    - name: oneGreater</span><br><span class="line">      title: One greater</span><br><span class="line">    - name: twoGreater</span><br><span class="line">      title: Two greater</span><br><span class="line">  default: notEqual</span><br></pre></td></tr></table></figure>
<p>最后来看<code>varEq</code>: 它是一个布尔值, 只有”true”和”false”两个值, 它在界面上就是一个可选框:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">varEq</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Assume</span> <span class="string">equal</span> <span class="string">variances</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Bool</span></span><br><span class="line"><span class="attr">      default:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>还有许多不同的选项类型。API 中提供了对它们中的每一个的更全面的描述，以及它们的属性: <a href="https://dev.jamovi.org/api_analysis-definition.html" target="_blank" rel="noopener">https://dev.jamovi.org/api_analysis-definition.html</a></p>
<p>当然，我们的分析实际上还没有做任何事情——我们还没有编写任何 R 代码。</p>
<h2><span id="实现分析r代码">实现分析(R代码)</span></h2><p>在本节中，我们将添加实现，即 R 代码，以执行我们的 t 检验分析。</p>
<p>在jamovi 分析中，这些R代码的实现存在于<code>.b.R</code>文件中，所以如果我们查看我们的ttest.b.R文件，我们会看到：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file is a generated template, your changes will not be overwritten</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#' @rdname jamovi</span></span><br><span class="line"><span class="comment">#' @export</span></span><br><span class="line">ttestClass &lt;- R6::R6Class(</span><br><span class="line">    <span class="string">"ttestClass"</span>,</span><br><span class="line">    inherit = ttestBase,</span><br><span class="line">    private = list(</span><br><span class="line">        .run = <span class="keyword">function</span>() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment"># `self`$data` contains the data</span></span><br><span class="line">            <span class="comment"># `self$`</span></span><br><span class="line"></span><br><span class="line">您还会注意到该.run()函数不接收任何参数。用户指定的参数实际上都编程了self的属性。同样，这可能看起来有点陌生，但它非常简单。</span><br><span class="line"></span><br><span class="line">例如我们的四个参数可以通过这种方式获得:</span><br></pre></td></tr></table></figure>
<ul>
<li>self<code>$options$</code>dep</li>
<li>self<code>$options$</code>group</li>
<li>self<code>$options$</code>alt</li>
<li>self<code>$options$</code></li>
</ul>
<p>你看到的<code></code>$<code>负号实际上就是一个属性获取负号,</code>self$<code>options</code>$dep<code>翻译过来就是self的options中的dep, 分析用到的数据保存在</code>self$<code>data</code>中, 这样我们就可以编写我们的t检验了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ttestClass &lt;- R6::R6Class(&quot;ttestClass&quot;,</span><br><span class="line">    inherit=ttestBase,</span><br><span class="line">    private=list(</span><br><span class="line">        .run=function() &#123;</span><br><span class="line"></span><br><span class="line">            formula &lt;- paste(self`$options$`dep, &apos;~&apos;, self`$options$`group)</span><br><span class="line">            formula &lt;- as.formula(formula)</span><br><span class="line">        </span><br><span class="line">            results &lt;- t.test(formula, self`$data)</span><br><span class="line">        </span><br><span class="line">            print(results)</span><br><span class="line">        &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>这段代码做的事情很简单, self$<code>options</code>$dep和self$<code>options</code>$group这两者都是字符串并且它们组装成一个公式。然后我们可以调用t.test()传入这个公式的函数，以及self$`data数据框。最后，我们打印结果。</p>
<p>在jamovi 中运行时，打印语句(print)的结果将出现在终端，而不是应用程序的结果区域（用户希望的地方）。为了解决这个问题，我们不是简单地打印结果，而是将结果分配给分析的结果对象。在 R 会话中运行时，仍会打印结果，但在 jamovi 中运行时，结果将显示在结果面板中。我们使用self`$results来保存结果。我们的新函数现在将变为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ttestClass &lt;- R6::R6Class(&quot;ttestClass&quot;,</span><br><span class="line">    inherit=ttestBase,</span><br><span class="line">    private=list(</span><br><span class="line">        .run=function() &#123;</span><br><span class="line"></span><br><span class="line">            formula &lt;- paste(self$`options`$dep, &apos;~&apos;, self$`options`$group)</span><br><span class="line">            formula &lt;- as.formula(formula)</span><br><span class="line">        </span><br><span class="line">            results &lt;- t.test(formula, self$`data, var.equal=self`$options$`varEq)</span><br><span class="line">        </span><br><span class="line">            self`$results$`</span><br><span class="line"></span><br><span class="line">result的text属性可以存放我们的字符串, 并且使用setContent来写入结果:</span><br><span class="line"></span><br><span class="line">所以现在我们的分析已经实现了，是时候安装并试用它了。使用通常的方式安装模块：</span><br></pre></td></tr></table></figure>
<p>jmvtools::install()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">下面再做一个分析就可以看到类似结果:</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;imgs/03.png&quot;&gt;</span><br><span class="line"></span><br><span class="line">同样，我们可以使用devtools包（不要与 混淆jmvtools）将此模块安装为 R 包，并在交互式 R 会话中运行相同的分析：</span><br></pre></td></tr></table></figure>
<p>devtools::install()<br>library(SuperAwesome)<br>data(ToothGrowth)<br>ttest(data=ToothGrowth, dep=’len’, group=’supp’)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">输出结果:</span><br></pre></td></tr></table></figure></p>
<p>Independent Samples T-Test</p>
<pre><code>Two Sample t-test
</code></pre><p>data:  len by supp<br>t = 1.9153, df = 58, p-value = 0.06039<br>alternative hypothesis: true difference in means is not equal to 0<br>95 percent confidence interval:<br> -0.1670064  7.5670064<br>sample estimates:<br>mean in group OJ mean in group VC<br>        20.66333         16.96333<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在我们继续之前，精明的读者会意识到组装我们的公式paste是有问题的。如果任一列名称有空格或特殊字符，粘贴将产生错误的公式。例如，如果用户指定了一个被称为的因变量the fish——结果公式将为the fish~group，而对 的调用as.formula()将失败：</span><br><span class="line"></span><br><span class="line">```as.formula(&apos;the fish~group&apos;)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## Error in parse(text = x, keep.source = FALSE) : </span><br><span class="line">##   &lt;text&gt;:1:5: unexpected symbol</span><br><span class="line">## 1: the fish</span><br><span class="line">##         ^</span><br></pre></td></tr></table></figure>
<p>jmvcore提供了函数constructFormula()，它可以组合简单的公式来适当地转义列名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">constructFormula(&apos;the fish&apos;, c(&apos;group&apos;))</span><br></pre></td></tr></table></figure>
<p>我们的代码做出相应的改变:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ttestISClass &lt;- R6Class(&quot;ttestISClass&quot;,</span><br><span class="line">    inherit=ttestISBase,</span><br><span class="line">    private=list(</span><br><span class="line">        .run=function() &#123;</span><br><span class="line"></span><br><span class="line">            formula &lt;- constructFormula(self`$options$`dep, self`$options$`group)</span><br><span class="line">            formula &lt;- as.formula(formula)</span><br><span class="line">        </span><br><span class="line">            results &lt;- t.test(formula, self`$data)</span><br><span class="line">        </span><br><span class="line">            self$`results`$text$`</span><br><span class="line"></span><br><span class="line">该jmvcore软件包包含许多此类有用的功能。值得一试。</span><br><span class="line"></span><br><span class="line">## 代码调试</span><br><span class="line"></span><br><span class="line">做开发的免不了有bug, 所以jamovi提供了很好的调试工具。</span><br><span class="line"></span><br><span class="line">我们特地把之前的代码改成错误的:</span><br></pre></td></tr></table></figure>
<p>ttestISClass &lt;- R6Class(“ttestISClass”,<br>    inherit=ttestISBase,<br>    private=list(<br>        .run=function() {</p>
<pre><code>    t.test(c(Inf, 3))  # &lt;-- produces an error!
})
</code></pre><p>)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">会看到这样的错误提示:</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;imgs/04.png&quot;&gt;</span><br><span class="line"></span><br><span class="line">在这个例子中，我们的代码只有一行代码，所以我们可以合理地确定问题出在哪里。然而，实际上软件可以是两行或三行甚至更多行代码。在更复杂的情况下，有一个“堆栈跟踪”会很方便，它告诉我们问题发生在哪里。jamovi 可以置于“开发模式”，它会在发生错误时显示堆栈跟踪。开发模式可以从应用程序菜单切换到 jamovi 窗口的右上角：</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;imgs/05.png&quot;&gt;</span><br><span class="line"></span><br><span class="line">然后错误信息就会更详细:</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;imgs/06.png&quot;&gt;</span><br><span class="line"></span><br><span class="line">## 创建丰富结果</span><br><span class="line"></span><br><span class="line">在本节中，我们将为我们的分析添加丰富的结果；一个不错的 APA 格式表，如下所示：</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;imgs/07.png&quot;&gt;</span><br><span class="line"></span><br><span class="line">### 结果的定义</span><br><span class="line"></span><br><span class="line">为了提供丰富的结果，我们需要在结果定义中添加一些条目。这是`ttest.r.yaml`文件的目的：</span><br><span class="line"></span><br><span class="line">```yaml</span><br><span class="line">---</span><br><span class="line">name:  ttest</span><br><span class="line">title: Independent Samples T-Test</span><br><span class="line">jrs:   &apos;1.1&apos;</span><br><span class="line"></span><br><span class="line">items:</span><br><span class="line">    - name:  text</span><br><span class="line">      title: Independent Samples T-Test</span><br><span class="line">      type:  Preformatted</span><br></pre></td></tr></table></figure></p>
<p>这与ttest.a.yaml文件非常相似；有一个名称、一个标题和一个 jamovi 结果规范 ( jrs) （注意，这jas与.a.yaml文件中的不同）。items描述了构成结果的所有项目。例如，结果可以由两个表和一个图组成。结果中的每一项都列在此处。</p>
<p>目前，结果包含一个Preformatted的文本名为”Independent Samples T-Test”。如果你回想上一节，我们访问了一个结果对象，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 添加表格</span><br><span class="line"></span><br><span class="line">让我们为 t 检验结果添加一个表格。目前，我们将保留现有的“预格式化”结果项并在下方添加表格。这将让我们检查我们填充表格的结果是否正确。</span><br><span class="line"></span><br><span class="line">修改ttest.r.yaml为：</span><br></pre></td></tr></table></figure>
<hr>
<p>name:  ttest<br>title: Independent Samples T-Test<br>jrs:   ‘1.1’</p>
<p>items:</p>
<pre><code>- name:  text
  title: Independent Samples T-Test
  type:  Preformatted

- name:  ttest
  title: Independent Samples T-Test
  type: Table
  rows:  1
  columns:
    - name: var
      title: &apos;&apos;
      type: text
    - name: t
      type: number
    - name: df
      type: integer
    - name: p
      type: number
      format: zto,pvalue
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">通过这些修改，我们添加了一个名为ttest的新表, 名为`Independent Samples T-Test`。我们还指定它有 1 行，有 4 列；列名是var、t、df和p。请注意，我们为 var 的标题(title)指定了一个空字符串。如果未指定标题，则使用列名(name)。</span><br><span class="line"></span><br><span class="line">你可以为每列的数据类型指定为text，number或integer。类型会影响列的格式化方式。text列是左对齐的，number和integer列右对齐。integer列被格式化为整数（没有小数位）。</span><br><span class="line"></span><br><span class="line">该format字段是一串逗号分隔值。它提供了有关如何格式化列的附加信息。例如p列，它应用了两种格式，zto和pvalue. zto表示一个值在 0 和 1 之间；这会导致它被渲染到固定的小数位。相反，没有这种格式的值被格式化为固定数量的有效数字。没有zto值 0.006 将被呈现0.00600（3 个有效数字），而与zto它一样将被呈现0.006（3 个小数位）。对于诸如相关系数之类的值和范围在 0 和 1 之间的其他值，通常首选后者。</span><br><span class="line"></span><br><span class="line">另一种格式是pvalue，表示该列中的值为 p-values。如果这些值中的任何一个低于阈值（默认为 .001），它们将被替换为&lt; .001.</span><br><span class="line"></span><br><span class="line">现在我们已经设置了我们的表，我们可以通过重新安装模块来查看它的样子：</span><br><span class="line"></span><br><span class="line">```jmvtools::install()</span><br></pre></td></tr></table></figure>
<p>如果您现在返回到 jamovi，您会看到已安装的模块已更新，并且我们之前的分析已重新运行。我们添加的表现在在结果中可见。这非常方便：每当您重新安装模块时，它都会立即更新。您的结果现在应如下所示：</p>
<p><img src="imgs/08.png"></p>
<h3><span id="填充表">填充表</span></h3><p>现在我们已经创建了一个表，让我们用 t 检验中的值填充它。为此，我们需要从 Rt.test函数返回的 t-test 对象中提取实际值。相当尴尬的是，R 中的分析不会返回一致的结果对象；通常没有可预测的方式来了解如何访问基础值。有些 R 函数返回列表，有些返回 S3 对象，有些返回 S4。有些需要使用索引 读取值，有些需要使用插槽 (@)。通常需要一些反复试验才能弄清楚如何访问结果对象的基础值。一个有用的函数是mode()函数。例如，我们可以像这样对结果对象调用 mode ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results &lt;- t.test(1:5)</span><br><span class="line">mode(results)</span><br></pre></td></tr></table></figure>
<p>输出:<code>## [1] &quot;list&quot;</code></p>
<p>这告诉我们 t.test 函数的结果对象是一个列表（尽管有些难懂）。然后我们可以使用我们通常在列表上使用的函数，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results &lt;- t.test(1:5)</span><br><span class="line">names(results)</span><br></pre></td></tr></table></figure>
<p>输出:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## [1] &quot;statistic&quot;   &quot;parameter&quot;   &quot;p.value&quot;     &quot;conf.int&quot;    &quot;estimate&quot;   </span><br><span class="line">## [6] &quot;null.value&quot;  &quot;alternative&quot; &quot;method&quot;      &quot;data.name&quot;</span><br></pre></td></tr></table></figure></p>
<p>稍加修改，我们可以找出results<code>$statistic包含t统计量、results$</code>parameter自由度和results`$p.valuep 值的值（最后一个可能不需要那么多修改）。</p>
<p>我们可以使用以下setRow()函数将这些值中的每一个分配给表中的行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">table &lt;- self$`results`$ttest</span><br><span class="line">table$`setRow(rowNo=1, values=list(</span><br><span class="line">    var=self`$options$`dep,</span><br><span class="line">    t=results`$statistic,</span><br><span class="line">    df=results$`</span><br><span class="line"></span><br><span class="line">删除文本结果:</span><br></pre></td></tr></table></figure>
<p>ttestISClass &lt;- R6Class(“ttestISClass”,<br>    inherit=ttestISBase,<br>    private=list(<br>        .run=function() {</p>
<pre><code>formula &lt;- constructFormula(self`$options$`dep, self`$options$`group)
formula &lt;- as.formula(formula)

results &lt;- t.test(formula, self`$data)

table &lt;- self$`results`$ttest

table$`setRow(rowNo=1, values=list(
    var=self`$options$`dep,
    t=results`$statistic,
    df=results$`
</code></pre><p>我们也来看看在 R 会话中运行这个分析。我们可以使用以下命令将软件包安装到 R 中：</p>
<p><code>devtools::install()  # note here we&#39;re using devtools, not jmvtools</code></p>
<p>并使用以下命令运行分析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library(SuperAwesome)</span><br><span class="line">data(&quot;ToothGrowth&quot;)</span><br><span class="line">ttest(ToothGrowth, dep=&apos;len&apos;, group=&apos;supp&apos;)</span><br></pre></td></tr></table></figure>
<p>输出:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Independent Samples T-Test</span><br><span class="line"></span><br><span class="line">Independent Samples T-Test     </span><br><span class="line">────────────────────────────── </span><br><span class="line">         t       df    p       </span><br><span class="line">────────────────────────────── </span><br><span class="line">  len    1.92    55    0.061   </span><br><span class="line">──────────────────────────────</span><br></pre></td></tr></table></figure>
<p> 可以看出，在 R 中也生成了一个格式良好的表。一切都保持不变，精确到小数位数。通过这种方式，jamovi 可以使 R 包——即使你不打算发布为 jamovi 模块——更有吸引力、更容易阅读、也更一致。</p>
<h2><span id="添加图">添加图</span></h2><p>在本节中，我们将为我们在本系列中开发的 t 检验分析添加一个图。绘图是出现在结果中的另一项，因此我们将在ttest.r.yaml文件中添加另一个条目：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">jrs:</span>   <span class="string">'1.1'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">items:</span></span><br><span class="line"><span class="attr">    - name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Table</span></span><br><span class="line"><span class="attr">      rows:</span>  <span class="number">1</span></span><br><span class="line"><span class="attr">      columns:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">var</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">text</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">t</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">number</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">df</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">integer</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">p</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">number</span></span><br><span class="line"><span class="attr">          format:</span> <span class="string">zto,pvalue</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">    - name:</span> <span class="string">plot</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Descriptives</span> <span class="string">Plot</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Image</span></span><br><span class="line"><span class="attr">      width:</span>  <span class="number">400</span></span><br><span class="line"><span class="attr">      height:</span> <span class="number">300</span></span><br><span class="line"><span class="attr">      renderFun:</span> <span class="string">.plot</span></span><br></pre></td></tr></table></figure>
<p>和以前一样，我们定义了一个项目有name，title和type; 在这种情况下，<br>类型是Image. 此外，我们定义renderFun了负责渲染图像的函数的名称。<br>无论我们指定什么渲染函数，我们都必须将其作为私有成员函数添加到ttestClassin:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#&apos; @export</span><br><span class="line">ttestClass &lt;- R6::R6Class(</span><br><span class="line">    &quot;ttestClass&quot;,</span><br><span class="line">    inherit = ttestBase,</span><br><span class="line">    private = list(</span><br><span class="line">        .run = function() &#123;</span><br><span class="line">            formula &lt;- paste(self`$options$`dep, &apos;~&apos;, self`$options$`group)</span><br><span class="line">            formula &lt;- as.formula(formula)</span><br><span class="line">            </span><br><span class="line">            results &lt;- t.test(formula, self`$data)</span><br><span class="line">            </span><br><span class="line">            table &lt;- self$`results`$ttest</span><br><span class="line">            table$`setRow(rowNo=1, values=list(</span><br><span class="line">                var=self`$options$`dep,</span><br><span class="line">                t=results`$statistic,</span><br><span class="line">                df=results$`</span><br><span class="line"></span><br><span class="line">我们将ggplot2用于绘图，因此请确保您已安装它。要在这个包/模块中使用 ggplot2，我们需要在描述和命名空间文件中添加一些条目。我们将 ggplot2 添加到说明文件(DESCRIPTION)中的导入行，因此它显示为：</span><br></pre></td></tr></table></figure>
<p>Imports: jmvcore, R6, ggplot2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">然后在代码中使用ggplots2需要引入:</span><br><span class="line"></span><br><span class="line">```import(ggplot2)</span><br></pre></td></tr></table></figure></p>
<p>这些都是基本的R语言特性。</p>
<h3><span id="代码实现">代码实现</span></h3><p>在jamovi 模块中，绘图分两个阶段进行；首先准备绘图的数据，然后渲染绘图。<br>这两个阶段意味着如果图像被调整大小，或者用户请求不同的文件格式，只需要再次进行渲染——数据准备只需要发生一次。</p>
<p>对于 t 检验，我们将绘制每个组的平均值和标准误。在 中ggplot2，我们需要将这些“绘图点”组合成一个数据框，我们将按如下方式进行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    means  &lt;- aggregate(formula, self`$data, mean)[,2]</span><br><span class="line">    ses    &lt;- aggregate(formula, self$`data, function(x) sd(x)/sqrt(length(x)))[,2]</span><br><span class="line">    sel    &lt;- means - ses  # standard error lower bound</span><br><span class="line">    seu    &lt;- means + ses  # standard error upper bound</span><br><span class="line">    levels &lt;- base::levels(self`$data[[self$`</span><br><span class="line"></span><br><span class="line">输出:</span><br></pre></td></tr></table></figure>
<h2><span id="level-mean-sel-seu">level     mean      sel      seu</span></h2><h2><span id="1-oj-2066333-1945733-2186934">1    OJ 20.66333 19.45733 21.86934</span></h2><h2><span id="2-vc-1696333-1545417-1847250">2    VC 16.96333 15.45417 18.47250</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">我们使用setState()函数给图像设置数据:</span><br></pre></td></tr></table></figure>
<pre><code>image &lt;- self`$results$`plot
image`$setState(plotData)
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">接下来，我们将绘图代码添加到.plot()我们创建的函数中：</span><br></pre></td></tr></table></figure>
<p>#’ @export<br>ttestClass &lt;- R6::R6Class(<br>    “ttestClass”,<br>    inherit = ttestBase,<br>    private = list(<br>        .run = function() {<br>            formula &lt;- paste(self$<code>options</code>$dep, ‘~’, self$<code>options</code>$group)<br>            formula &lt;- as.formula(formula)</p>
<pre><code>    results &lt;- t.test(formula, self$`data)

    table &lt;- self`$results$`ttest
    table`$setRow(rowNo=1, values=list(
        var=self$`options`$dep,
        t=results$`statistic,
        df=results`$parameter,
        p=results$`p.value
    ))

    means  &lt;- aggregate(formula, self`$data, mean)[,2]
    ses    &lt;- aggregate(formula, self$`data, function(x) sd(x)/sqrt(length(x)))[,2]
    sel    &lt;- means - ses  # standard error lower bound
    seu    &lt;- means + ses  # standard error upper bound
    levels &lt;- base::levels(self`$data[[self$`options`$group]])
    plotData &lt;- data.frame(level=levels, mean=means, sel=sel, seu=seu)

    image &lt;- self$`results`$plot
    image$`setState(plotData)
},

.plot=function(image, ...) {
    plotData &lt;- image`$state
    plot &lt;- ggplot(plotData, aes(x=level, y=mean)) +
        geom_errorbar(aes(ymin=sel, ymax=seu, width=.1)) +
        geom_point(aes(x=level, y=mean)) +
        labs(title=self$`
</code></pre><h2><span id="发布模块">发布模块</span></h2><p>调用以在当前工作目录中jmvtools::install()生成具有扩展名的文件.jmo。这个文件是你的模块，可以分发给其他人，以“加载”。这是在测试期间分发模块的好方法，您可能希望将其发送给少数人。人们可以从 jamovi 商店（可从 jamovi 右上角的菜单访问）内加载模块。</p>
<p>一旦您对您的模块准备好进行更广泛的分发感到满意，我们鼓励您将其提交到 jamovi 商店。这使得任何使用 jamovi 的人都可以浏览和发现您的模块。</p>
<p>如果您有想要提交给 jamovi 商店的模块，请与我们联系：<a href="mailto:contact@jamovi.org" target="_blank" rel="noopener">contact@jamovi.org</a></p>
<h2><span id="补充">补充</span></h2><h3><span id="依赖关系">依赖关系</span></h3><p>jmvtools::install()还会下载您的所有软件包依赖项（在DESCRIPTION文件中列出），并将它们捆绑到您的模块中。这确保了模块拥有它需要的一切，并且模块将始终使用可预测的依赖版本。这会导致更大的模块文件大小，但可以说是考虑到磁盘空间的便宜，为可重复性付出的代价很小。</p>
<h3><span id="命名空间">命名空间</span></h3><p>我们建议您尽量减少NAMESPACE文件中的导入语句。这些可能会导致加载包时出现大量延迟，因为无论是否需要，都会加载文件中列出的所有包。</p>
<p>相反，访问具有完整命名空间的函数，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats::t.test(...)</span><br></pre></td></tr></table></figure>
<p>使用这种方法，依赖项仅在需要时加载。这会缩短启动时间（用户选择您的分析之一与结果首次出现之间的延迟），并且可以显着减少您的模块使用的 RAM 量。</p>
<h2><span id="动态表">动态表</span></h2><p>这是我们之前设置的结果:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">    - name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Table</span></span><br><span class="line"><span class="attr">      rows:</span>  <span class="number">1</span></span><br><span class="line"><span class="attr">      columns:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">var</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">text</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">t</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">number</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">df</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">integer</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">p</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">number</span></span><br><span class="line"><span class="attr">          format:</span> <span class="string">zto,pvalue</span></span><br></pre></td></tr></table></figure>
<p>结果包含一个名为ttest“独立样本 T 检验”的表格，有 4 列和 1 行。</p>
<p>然而，实际上，表中的行数通常不是固定的。它们可能会根据用户选择的选项或分析本身的结果而有所不同。在本教程中，我们将专注于前者。</p>
<p>在之前的教程系列中，我们创建了 t 检验分析。它允许用户指定单个因变量和单个分组变量。但是，我们可以通过允许人们指定多个因变量来使这种分析更加方便。例如，数据集可能包含“性别”、“身高”和“体重”列。通过允许多个因变量，用户可以指定“身高”和“体重”作为因变量，并指定“性别”作为分组变量。然后我们的分析可以执行多个 t 检验（每个因变量一个）。结果分析可能如下所示：</p>
<p><img src="imgs/12.png"></p>
<p>我们需要做的第一件事就是改变因变量的.a.yaml文件，从Variable到Variables。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">name:  ttest</span><br><span class="line">title: Independent Samples T-Test</span><br><span class="line">menuGroup: SuperAwesome</span><br><span class="line">version: &apos;1.0.0&apos;</span><br><span class="line">jas: &apos;1.1&apos;</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">    - name: data</span><br><span class="line">      type: Data</span><br><span class="line"></span><br><span class="line">    - name: deps                  # &lt;-- let&apos;s add an s</span><br><span class="line">      title: Dependent Variables  # &lt;-- and another s</span><br><span class="line">      type: Variables             # &lt;-- Variables with an s!</span><br><span class="line">      </span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>注意当前 jmvtools 中存在一个错误，其中 UI 未适当更新。在这种情况下，jmvtools应该更新 .u.yaml 文件以接受多个变量，但这不会发生。可以手动更新 .u.yaml 文件，但通常最简单的方法是简单地删除 .u.yaml 文件，然后让 jmvtools 从头开始创建一个。这是将在未来几周内解决的问题。</p>
<p>请注意，您必须关闭 jamovi，然后重新启动它才能查看分析 UI 的更改。</p>
<p>由于我们更改了dep变量的名称和类型，我们的 t 检验将不再起作用。目前应该注释掉或删除.run()t检验分析函数的内容，否则会产生一些错误。我们将在本教程的稍后部分返回。</p>
<p>执行这些修改后，您的 t-test UI 应如下所示：</p>
<p><img src="imgs/13.png"></p>
<p>我们需要修改<code>.y.raml</code>, rows是需要更改的值, 现在表格不是1行了, 但是具体是几行完全取决于用户设置的因变量(deps)数量:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">- name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Table</span></span><br><span class="line"><span class="attr">      rows:</span> <span class="number">1</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure>
<p>我们就直接更改为:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">- name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">Table</span></span><br><span class="line"><span class="attr">      rows:</span> <span class="string">(deps)</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure>
<p>以这种方式绑定时，表中的行数始终与用户指定的变量数相匹配。让我们重新安装我们的模块，看看它的实际效果：</p>
<p><img src="imgs/14.png"></p>
<p>可以看出，我们的表相应地增长和缩小。但我们可以做得更好。<br>第一列应该包含变量名，虽然我们可以使用 Table 的setRow()函数添加它，但有更好的方法来做到这一点。<br>我们可以使用content这个选项:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">items:</span></span><br><span class="line"><span class="attr">    - name:</span>  <span class="string">ttest</span></span><br><span class="line"><span class="attr">      title:</span> <span class="string">Independent</span> <span class="string">Samples</span> <span class="string">T-Test</span></span><br><span class="line"><span class="attr">      type:</span>  <span class="string">Table</span></span><br><span class="line"><span class="attr">      rows:</span>  <span class="string">(deps)</span></span><br><span class="line"><span class="attr">      columns:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">var</span></span><br><span class="line"><span class="attr">          title:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">text</span></span><br><span class="line"><span class="attr">          content:</span> <span class="string">(`$key)</span>  <span class="comment"># &lt;- here!</span></span><br></pre></td></tr></table></figure>
<p>你会发现<code>($</code>key)`这个特殊的字段, 它实际上是每一行的key, 这个key需要你在代码中设置, 所以你看到下面的R代码的时候才知道是什么</p>
<p>现在就是在<code>b.R</code>文件中设置我们的表格, 我们在调用<code>setRow</code>的时候, 使用了rowKey这个参数, 这样我们的表格每一行都有个key。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">    .run=function() &#123;</span><br><span class="line">    </span><br><span class="line">        table &lt;- self`$results$`ttest</span><br><span class="line">    </span><br><span class="line">        for (dep in self`$options$`deps) &#123;</span><br><span class="line">    </span><br><span class="line">            formula &lt;- jmvcore::constructFormula(dep, self`$options$`group)</span><br><span class="line">            formula &lt;- as.formula(formula)</span><br><span class="line">        </span><br><span class="line">            results &lt;- t.test(formula, self`$data)</span><br><span class="line">        </span><br><span class="line">            table$`setRow(rowKey=dep, values=list(  # set by rowKey!</span><br><span class="line">                t=results`$statistic,</span><br><span class="line">                df=results$`</span><br><span class="line"></span><br><span class="line">## 数据处理</span><br><span class="line"></span><br><span class="line">到目前为止，在这些教程中，我们还没有真正检查self`$data数据框实际包含的内容。</span><br><span class="line">它包含来自电子表格视图中显示的数据集的数据，但这些值如何映射到 R 类型系统有点微妙。</span><br><span class="line"></span><br><span class="line">在jamovi 中有四种变量类型：</span><br><span class="line"></span><br><span class="line">- Nominal Text 名义文本</span><br><span class="line">- Nominal 名义</span><br><span class="line">- Ordinal 序数</span><br><span class="line">- Continuous 连续</span><br><span class="line"></span><br><span class="line">Nominal Text变量只有“文本”值，因此将self$`data作为因子出现在数据框中。Continuous变量只有数字值，所以在self`$data数据框中，它们是数字类型。但是，变量Nominal和Ordinal变量类型有点棘手。这些可以同时具有数字和文本值。</span><br><span class="line"></span><br><span class="line">（注意jamovi 目前不支持将文本值（标签）分配给 Nominal 和 Ordinal 变量。这将在未来添加。）</span><br><span class="line"></span><br><span class="line">此外，在某些情况下，您希望将 Nominal或Ordinal变量视为因子（即，当它用作 t 检验的分组变量时），但其他时候，您希望将其用作数字（即 里克特量表）。（有些人会争辩说这永远不应该发生——你永远不应该取分类变量的平均值，这可能是真的——但有些人仍然觉得它很有用）。</span><br><span class="line"></span><br><span class="line">Nominal变量“双重性质”的另一个优点是，如果用户不想担心它，则可以忽略变量类型。在处理大型数据集时，检查和设置所有列、确保它们具有正确的变量类型等的过程可能既漫长又乏味。所以只使用变量类型作为指导可以让用户更容易。这也与包括 SPSS 在内的许多统计软件的工作方式一致。</span><br><span class="line"></span><br><span class="line">因此，应将Nominal变量视为因子还是连续变量应由上下文来确定。例如，对于 ANCOVA，分配给“因子”的变量应视为因子，分配给“协变量”的变量应视为数字。避免根据变量的类型推断用户希望如何处理变量，即避免使用“独立变量”选项，如果用户分配名义变量，则将其视为因子，如果用户分配连续变量，则被视为协变量——这是隐含的行为，用户会犯错误。</span><br><span class="line"></span><br><span class="line">在jamovi，默认情况下，Nominal和Ordinal变量都被当作因子。每列的数值作为属性附加到slef$`data列。您不需要直接与此属性交互，但在某些情况下，知道它在那里是件好事。</span><br><span class="line"></span><br><span class="line">与这些属性有关的一个问题是包中的许多 R 函数不尊重属性。使用na.omit或subset有可能对self`$data进行修改，导致这些属性的丢弃。出于这个原因，最好在使用这些函数之前将这些列转换为您想要使用的类型（因此不再需要这些属性）。</span><br><span class="line"></span><br><span class="line">将Nominal或者Ordinal变量（作为因子出现）转换为数字，jmvcore提供toNumeric()函数。要反向转换，从数字到因子，您可以使用R 内置的factor()或as.factor()函数。如果toNumeric()已经是数字的变量上调用它，则它不起作用。类似地，如果as.factor()在一个已经是因子的变量上调用它，它没有效果。所以你可以在每一列上调用它们，而无需检查它们是否已经是正确的类型。</span><br><span class="line"></span><br><span class="line">回到我们的 ANCOVA 示例，该示例需要单个数字因变量、一个或多个因子作为因子，以及一个或多个协变量作为数字，我们可以.run()按如下方式开始函数：</span><br></pre></td></tr></table></figure>
<pre><code>.run = function() {

    # read the option values into shorter variable names

    dep  &lt;- self$`options`$dep
    facs &lt;- self$`options`$factors
    covs &lt;- self$`options`$covs

    # get the data

    data &lt;- self$`
</code></pre><h2><span id="状态">状态</span></h2><p>到目前为止，教程系列中演示的分析完全无状态。这意味着每次运行分析时（例如，响应用户选中复选框）它都会从头到尾运行分析。在许多情况下，这不是很有效。用户可以运行 t 检验，然后选择请求描述的复选框。如果没有state，分析将在每次更改分析时重新计算 t 检验结果，即使更改的选项对 t 检验结果没有影响。</p>
<p>对于许多分析来说，这不是问题——事实上，t 检验运行得非常快，因此每次更改选项时重新计算并不会真正造成问题；用户仍然几乎立即收到结果。但是，某些分析可能需要相当长的时间才能运行，并且在每次更改时完整地重新运行这些分析会导致长时间的延迟和糟糕的用户体验。这个问题的解决方案是state。</p>
<p>在使用状态下，分析会保留先前运行时的信息。如果用户对现有分析进行更改，则该分析可以使用先前计算的结果。以 t 检验为例，如果用户选中请求附加描述表的复选框，则分析可以重新使用上次运行分析时的 t 检验结果。但是，如果用户更改了影响 t 检验结果的选项（例如 t 检验的类型），则分析不应重复使用较早的 t 检验结果。是否应使用较早的结果由clearWith属性决定。</p>
<h3><span id="clearwith">clearWith</span></h3><p>在r.yaml中使用:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">items:</span><br><span class="line">    - name:  ttest</span><br><span class="line">      title: Independent Samples T-Test</span><br><span class="line">      type:  Table</span><br><span class="line">      rows:  (deps)</span><br><span class="line">      </span><br><span class="line">      clearWith:  # &lt;-- here</span><br><span class="line">        - group</span><br><span class="line">        - alt</span><br><span class="line">        - varEq</span><br><span class="line">        </span><br><span class="line">      columns:</span><br><span class="line">        - name: var</span><br><span class="line">          title: &apos;&apos;</span><br><span class="line">          type: text</span><br><span class="line">          content: ($key)</span><br></pre></td></tr></table></figure>
<p>这clearWith设置了以后, 如果任何选项(group，alt或varEq)被清除或改变, 表格将重新计算, 请注意，我们尚未将deps选项添加到此列表中。当用户添加额外的因变量时，我们不希望它清除现有的行。您可以通过运行此示例并一次添加多个因变量来查看会发生什么。</p>
<p>但是，应该注意的是，我们实际上并没有减少正在执行的计算量。尽管在更改某些选项时不再清除该表，但我们在.b.R文件中的分析实现仍会遍历所有因变量并对每个因变量执行 t 检验。然后用这个新计算的值覆盖表中已有的值；完全相同的值。这不是问题，因为 t-test 运行得非常快，但是我们可以修改我们的.b.R文件以不计算表中已经存在的值。isFilled()方法帮我们找出哪行数据需要进行计算</p>
<h3><span id="isfilled">isFilled()</span></h3><p>有三种调用方法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">table`$isFilled() # 整个表格是否填满</span><br><span class="line"></span><br><span class="line">table$`isFilled(rowNo=i) # i行是否填满</span><br><span class="line"></span><br><span class="line">table`$isFilled(rowKey=key) # key行是否填满</span><br></pre></td></tr></table></figure>
<p>现在我们来改写我们的R代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    .run=function() &#123;</span><br><span class="line">    </span><br><span class="line">        table &lt;- self$`results`$ttest</span><br><span class="line">    </span><br><span class="line">        for (dep in self$`options`$deps) &#123;</span><br><span class="line">        </span><br><span class="line">            if ( ! table$`isFilled(rowKey=dep)) &#123;  # &lt;- this if statement!</span><br><span class="line">    </span><br><span class="line">                formula &lt;- jmvcore::constructFormula(dep, self`$options$`group)</span><br><span class="line">                formula &lt;- as.formula(formula)</span><br><span class="line">            </span><br><span class="line">                results &lt;- t.test(formula, self`$data)</span><br><span class="line">            </span><br><span class="line">                table$`setRow(rowKey=dep, values=list(  # set by rowKey!</span><br><span class="line">                    t=results`$statistic,</span><br><span class="line">                    df=results$`</span><br><span class="line"></span><br><span class="line">### setState</span><br><span class="line"></span><br><span class="line">但是，有时我们不想只存储最终结果；有时我们也想存储中间对象。例如，我们可能想要创建一个拟合对象，然后在下次运行分析时重复使用这个相同的拟合对象。</span><br><span class="line"></span><br><span class="line">可以使用以下方法和属性从任何结果元素（即 Image或 table ）保存和恢复状态</span><br></pre></td></tr></table></figure>
<p>table<code>$setState(object)
object &lt;- table$</code></p>
<blockquote>
<p><strong>注意</strong><br>统计咨询请加QQ 2726725926, 微信 mllncn,  SPSS统计咨询是收费的, 不论什么模型都可以, 只限制于1个研究内.<br>跟我学统计可以代做分析, 每单几百元不等.<br>本文由jupyter notebook转换而来, 您可以在这里下载<a href="jamovi模块开发教程.ipynb">notebook</a><br>可以在微博上@mlln-cn向我免费题问<br>请记住我的网址: mlln.cn 或者 jupyter.cn</p>
</blockquote>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/jamovi/">#jamovi</a>
        </div>
    



</div>
        </section>
        <section>
            <div class="content" style="color: #d7ecff">
                <h3 id="赞助"><a href="#赞助" class="headerlink" title="赞助"></a>赞助</h3>
                <p>持续创造有价值的内容, 我需要你的帮助</p>
                <p><img src="/img/收款二维码.png" class="img-thumbnail"></p>
            </div>
        </section>
        <!-- changyan comments -->
        <section class="main">
            <!--PC版畅言-->

<div class="container"><div id="SOHUCS" sid="2021/08/19/jamovi模块开发教程/"></div>
<script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js"></script>
<script type="text/javascript">
window.changyan.api.config({
appid: 'cysqnjGqk',
conf: 'prod_023698c59c1b0d0e29687979a2d2e9a3'
});
setTimeout(()=>{
    $('#closePoPBD').click()
}, 2000)
</script>
</div>

        </section>
    </div>

    <!-- rightside -->
    <div class="col-md-3 col-sm-12 rightside">
        <div class="related-posts">
    <h3>
        <a href="#">
            赞助推荐
        </a>
    </h3>
    <div class="page_list">
        
            <div class="archive-post">
                <a href="https://jupyter.cn/home/">问卷代填保证质量</a>
            </div>
        
    </div>
</div>
<div class="related-posts">
    <h3>
        常用工具
    </h3>
    <div class="page_list">
        <div class="archive-post">
            <a href="/mplusoutput/">Mplus结果查看器</a>
        </div>
        <div class="archive-post">
            <a href="/drawio/">绘图软件</a>
        </div>
        <div class="archive-post">
            <a href="/2018/09/26/在线绘制中介效应图/">
                在线绘制中介效应图
            </a>
        </div>
        <div class="archive-post">
            <a href="/neural/">神经网络可视化</a>
        </div>
        <div class="archive-post">
            <a href="/psychopy/">psychopy教程</a>
        </div>
        <div class="archive-post">
            <a href="/vector/">[词向量]高维向量可视化</a>
        </div>
        <div class="archive-post">
            <a href="/demos/evolutionSimulator/">[tensorflow.js案例]进化算法演示</a>
        </div>
        <div class="archive-post">
            <a href="/guideToPython/">[书]Python最佳实践</a>
        </div>
        <div class="archive-post">
            <a href="/2017/10/10/sobel检验原理和一键计算器/">Sobel检验计算器</a>
        </div>
        <div class="archive-post">
            <a href="/2019/09/06/spss计算平均方差提取量AVE和组合信度CR的方法/">平均方差提取量AVE和组合信度CR计算器</a>
        </div>
        <div class="archive-post">
            <a href="/2017/12/12/JavaScript做的表格卡方检验-一键在线测试/">卡方检验计算器</a>
        </div>
        <div class="archive-post">
            <a href="/2020/03/22/SPSS做简单调节效应分析Model-1-Of-Process/">简单交互效应可视化工具</a>
        </div>
        <div class="archive-post">
            <a href="/2020/10/10/P值显著性计算器/">P值显著性计算器</a>
        </div>
        <div class="archive-post">
            <a href="/2020/12/23/均值差异的效应量在线计算器/">两组均值差异的效应量在线计算器</a>
        </div>
    </div>
</div>



<div class="related-posts">
    <div class="archive-post">
        <a href="#">Python数据科学技术交流QQ群:116384132</a>
    </div>
    <div class="archive-post">
        <a href="#">SPSS/Stata统计分析QQ群:572803384</a>
    </div>
    <div class="archive-post">
        <a href="#">如果你有其他有价值的群,想放到这里分享,可以联系我QQ675495787</a>
    </div>
</div>
<div class="related-posts">
    <h3>
        <a href="/tags/jamovi/">
            jamovi
        </a>
    </h3>
    <div class="page_list">
        
            <div class="archive-post">
                <a href="/2021/08/19/jamovi模块开发教程/">
                    jamovi模块开发教程
                </a>
            </div>
            
    </div>
</div>


<div class="related-posts hidden-sm-down">
    <h3>
        <a href="#">
            友商赞助
        </a>
    </h3>
    <div class="page_list">
        <div class="archive-post">
            <a href="http://jupyter.cn">
                  问卷大全问卷案例下载
            </a>
            <a href="https://mlln.cn/2019/12/26/2020%E5%B9%B4%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87%E9%97%AE%E5%8D%B7%E4%BA%92%E5%A1%AB%E7%BE%A4%E6%8E%A8%E8%8D%90/">
                大学生互填问卷群推荐
            </a>
        </div>
    </div>
</div>
    </div>
</div>



</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 footer-about">
                <h2>About</h2>
                <p>
                    这是<code>xxxspy</code>的个人博客
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2022/08/31/结构方程模型多组比较分析调节变量/">结构方程模型多组比较分析调节变量</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/08/24/JupyterNotebook中运行R代码/">Jupyter notebook中运行R代码</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/08/12/R中如何自动整理结果为论文可用格式/">R中如何自动整理结果为论文可用格式</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/08/11/R语言快速入门练习材料/">R语言快速入门练习材料</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/07/24/潜在类别分析入门/">潜在类别分析LCA入门</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/06/12/Amos结构方程数据分析案例教程/">Amos结构方程模型数据分析入门教程</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/17/大纲/">SPSS+AMOS数据分析案例分析报告</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/17/SPSS-AMOS数据分析案例教程-关于中介模型/">SPSS+AMOS数据分析案例教程-关于中介模型</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/01/12/结构方程模型最佳实践/">结构方程模型最佳实践</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2021/11/19/百度指数数据下载方法/">百度指数数据下载方法</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 footer-tags">
    <h2>tags</h2>
    <ul>
        
        <span>
            <a class="footer-post" href="/tags/stata/">stata</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/报告系统/">报告系统</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/spss/">spss</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/问卷数据分析/">问卷数据分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/数据分析/">数据分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/教程/">教程</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/SPSS/">SPSS</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/amos/">amos</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/共同方法偏差/">共同方法偏差</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/信度分析/">信度分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/问卷互填/">问卷互填</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/问卷星/">问卷星</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/问卷代填/">问卷代填</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/问卷网/">问卷网</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/datanitro/">datanitro</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/python/">python</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/excel/">excel</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/mplus/">mplus</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/VBA/">VBA</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/numpy/">numpy</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/django/">django</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/eprime/">eprime</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/卡方检验/">卡方检验</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/javascript/">javascript</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/mysql/">mysql</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/结构方程/">结构方程</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/MathJax/">MathJax</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/Latex/">Latex</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/R语言/">R语言</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/机器学习/">机器学习</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/游戏/">游戏</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/显著性/">显著性</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/process/">process</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/推荐书/">推荐书</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/JSONSchema/">JSONSchema</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/statsmodels/">statsmodels</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/人工智能/">人工智能</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/Q-learning/">Q-learning</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/深度学习/">深度学习</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/e-prime/">e-prime</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/tamplermonkey/">tamplermonkey</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/nodejs/">nodejs</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/git/">git</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/gitlab/">gitlab</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/jupyter/">jupyter</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/notebook/">notebook</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/gensim/">gensim</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/摘要生成/">摘要生成</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/keras教程/">keras教程</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/keras基础/">keras基础</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/t检验/">t检验</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/方差分析/">方差分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/p5-js/">p5.js</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/mongodb/">mongodb</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/jieba/">jieba</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/mongoengine/">mongoengine</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/officejs/">officejs</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/pandas/">pandas</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/psychopy/">psychopy</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/eprime-e-prime/">eprime/e-prime</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/nginx/">nginx</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/electron/">electron</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/flexx/">flexx</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/gui/">gui</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/selenium/">selenium</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/格式化字符串/">格式化字符串</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/logging/">logging</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/pywinauto/">pywinauto</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/lisrel/">lisrel</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/时间序列/">时间序列</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/pil/">pil</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/tkinter/">tkinter</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/scipy/">scipy</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/情感分析/">情感分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/下载/">下载</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/网盘/">网盘</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/os/">os</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/requests/">requests</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/cookies/">cookies</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/中介效应/">中介效应</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/文本挖掘/">文本挖掘</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/sublime/">sublime</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/svd/">svd</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/pca/">pca</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/tensorflow教程/">tensorflow教程</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/vscode/">vscode</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/自然语言处理/">自然语言处理</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/win32com/">win32com</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/wxpython/">wxpython</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/tensorflow/">tensorflow</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/作文评分/">作文评分</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/语料库/">语料库</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/CCA/">CCA</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/典型相关分析/">典型相关分析</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/cron/">cron</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/chrome/">chrome</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/爬虫/">爬虫</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/逆向工程/">逆向工程</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/卡方/">卡方</a>
        </span>
        
        <span>
            <a class="footer-post" href="/tags/区块链/">区块链</a>
        </span>
        
    </ul>
</div>

            
        </div>
        <!-- links -->

<div class="row">
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-about">
        <h2>Links</h2>
        <ul>
            
                <span> | </span><a class="footer-post" href="http://mlln.cn/baidusitemap.xml" target="_blank">网站地图</a><span> | </span>
            
                <span> | </span><a class="footer-post" href="http://mlln.cn/sitemap.xml" target="_blank">DataScience</a><span> | </span>
            
        </ul>
    </div>
</div>



        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/xxxspy">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:675495787@qq.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @感谢github免费托管，hexo的静态网站引擎和模板主题制作者<a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                    <br>
                    <a href="http://www.beian.miit.gov.cn">京ICP备16033873号-2</>
                </a></div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

<!-- tweenmax -->
<script src="/js/TweenMax.min.js">

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- bootstrap.js -->
<script src="https://cdn.bootcss.com/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Baidu link push -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!-- baidu_static -->

	<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?588f06b88af0ef575445f53432cd15ec";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>







</body>

</html>